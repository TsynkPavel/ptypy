
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ptypy.experiment package &#8212; ptypy 0.8.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/header.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/ptypyicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ptypy.io package" href="ptypy.io.html" />
    <link rel="prev" title="ptypy.engines package" href="ptypy.engines.html" />
<link href='http://fonts.googleapis.com/css?family=PT+Sans|Ubuntu|Cuprum' rel='stylesheet' type='text/css'>

  </head><body>



<div class="pageheader">
  <ul>
    <li><a href="http://ptycho.github.io/ptypy">Home</a></li>
    <li><a href="http://www.github.com/ptycho/ptypy">Github</a></li>
    <li><a href="../content.html">Docs</a></li>
    <!-- <li><a href="develop.html">Extend/Develop</a></li> -->
  </ul>
  <div>
    <a href="../index.html"><img src="../_static/logo_60px.png" alt="SPHINX" /></a>

    <h0 style="padding-bottom:40px">Ptychography for Python</h0>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptypy.io.html" title="ptypy.io package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ptypy.engines.html" title="ptypy.engines package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../content.html">ptypy 0.8.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ptypy.html" accesskey="U">ptypy package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ptypy.experiment package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ptypy-experiment-package">
<h1>ptypy.experiment package<a class="headerlink" href="#ptypy-experiment-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-ptypy.experiment.ID16Anfp">
<span id="ptypy-experiment-id16anfp-module"></span><h2>ptypy.experiment.ID16Anfp module<a class="headerlink" href="#module-ptypy.experiment.ID16Anfp" title="Permalink to this headline">¶</a></h2>
<p>Scan loading recipe for the ID16A beamline at ESRF - near-field ptycho setup.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.ID16Anfp.</span></span><span class="sig-name descname"><span class="pre">ID16AScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Subclass of PtyScan for ID16A beamline (specifically for near-field
ptychography).</p>
<p>Default data parameters. See <code class="xref py py-data docutils literal notranslate"><span class="pre">scan.data</span></code></p>
<p>Create a PtyScan object that will load ID16A data.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">False,</span> <span class="pre">'base_path':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'dark_subtraction':</span> <span class="pre">False,</span> <span class="pre">'det_flat_field':</span> <span class="pre">None,</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'distortion_h_file':</span> <span class="pre">'/data/id16a/inhouse1/instrument/img1/optique_peter_distortion/detector_distortion2d_v.edf',</span> <span class="pre">'distortion_v_file':</span> <span class="pre">'/data/id16a/inhouse1/instrument/img1/optique_peter_distortion/detector_distortion2d_h.edf',</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'flat_division':</span> <span class="pre">False,</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'mask_file':</span> <span class="pre">None,</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'motors':</span> <span class="pre">['spy',</span> <span class="pre">'spz'],</span> <span class="pre">'motors_multiplier':</span> <span class="pre">1e-06,</span> <span class="pre">'name':</span> <span class="pre">'ID16AScan',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">(False,</span> <span class="pre">True,</span> <span class="pre">False),</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'recipe':</span> <span class="pre">{},</span> <span class="pre">'sample_name':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'version':</span> <span class="pre">0.1,</span> <span class="pre">'whitefield_file':</span> <span class="pre">'/data/id16a/inhouse1/instrument/whitefield/white.edf'}</span></em><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.
Returns the number of frames available from starting index <cite>start</cite>, and
whether the end of the scan was reached.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>int</em><em> or </em><em>None</em>) – Number of frames requested</p></li>
<li><p><strong>start</strong> (<em>int</em><em> or </em><em>None</em>) – Scanpoint index to start checking from</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>frame_accessible</strong> (<em>int</em>) – Number of frames readable from a starting point <cite>start</cite></p></li>
<li><p><strong>end_of_scan</strong> (<em>bool or None</em>) – Check if the end of scan was reached, otherwise None if this
routine doesn’t know</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.correct">
<span class="sig-name descname"><span class="pre">correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.correct" title="Permalink to this definition">¶</a></dt>
<dd><p>Place holder for dark and flatfield correction. Apply (eventual)
corrections to the raw frames. Convert from “raw” frames to
usable data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw</strong> (<em>dict</em>) – Dict containing index matched data frames (np.array).</p></li>
<li><p><strong>weights</strong> (<em>dict</em>) – Dict containing possible weights.</p></li>
<li><p><strong>common</strong> (<em>dict</em>) – Dict containing possible dark and flat frames.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data, weights</strong> – Flat and dark-corrected data dictionaries. These dictionaries
must have the same keys as the input <cite>raw</cite> and contain
corrected frames (<cite>data</cite>) and statistical weights (<cite>weights</cite>)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the negative values results from the calculation, they will
be forced to be equal to 0.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, pos, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If one weight (mask) is to be used for the whole scan, it should
be loaded with load_weights(). The same goes for the positions,
which sould be loade with load_positions().</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.load_common">
<span class="sig-name descname"><span class="pre">load_common</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.load_common" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads anything that is common to all frames and stores it in dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>common</strong> – contains information common to all frames such as dark,
flat-field, detector flat-field, normalization couter,
and distortion files</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.load_positions">
<span class="sig-name descname"><span class="pre">load_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads all positions for all diffraction patterns in this scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>Positions</strong> – A (N,2)-array where <em>N</em> is the number of positions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.ID16AScan.load_weight">
<span class="sig-name descname"><span class="pre">load_weight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.ID16AScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Function description see parent class. For now, this function
will be used to load the mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>weight2d</strong> – A two-dimensional array with a shape compatible to the raw
diffraction data frames if provided from file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.experiment.ID16Anfp.undistort">
<span class="sig-prename descclassname"><span class="pre">ptypy.experiment.ID16Anfp.</span></span><span class="sig-name descname"><span class="pre">undistort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16Anfp.undistort" title="Permalink to this definition">¶</a></dt>
<dd><p>Frame distortion correction (linear interpolation)
Any value outside the frame is replaced with a constant value (mean of
the complete frame)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> (<em>ndarray</em>) – The input frame data</p></li>
<li><p><strong>delta</strong> (<em>2-tuple</em>) – Containing the horizontal and vertical displacements respectively.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>outf</strong> – The corrected frame of same dimension and type as frame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ptypy.experiment.hdf5_loader">
<span id="ptypy-experiment-hdf5-loader-module"></span><h2>ptypy.experiment.hdf5_loader module<a class="headerlink" href="#module-ptypy.experiment.hdf5_loader" title="Permalink to this headline">¶</a></h2>
<p>Scan loading recipe for the Diamond beamlines.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.hdf5_loader.</span></span><span class="sig-name descname"><span class="pre">Hdf5Loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swmr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>First attempt to make a generalised hdf5 loader for data. Please raise a ticket in github if changes are required
so we can coordinate. There will be a Nexus and CXI subclass to this in the future.</p>
<p>hdf5 data loader</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'darkfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'electron_data':</span> <span class="pre">False,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'flatfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'framefilter':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'frameorder':</span> <span class="pre">{'indices':</span> <span class="pre">None},</span> <span class="pre">'intensities':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'mask':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'invert':</span> <span class="pre">False,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'Hdf5Loader',</span> <span class="pre">'normalisation':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'sigma':</span> <span class="pre">3},</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'outer_index':</span> <span class="pre">None,</span> <span class="pre">'padding':</span> <span class="pre">None,</span> <span class="pre">'positions':</span> <span class="pre">{'bounding_box':</span> <span class="pre">{'fast_axis_bounds':</span> <span class="pre">None,</span> <span class="pre">'slow_axis_bounds':</span> <span class="pre">None},</span> <span class="pre">'fast_index':</span> <span class="pre">None,</span> <span class="pre">'fast_key':</span> <span class="pre">None,</span> <span class="pre">'fast_multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'file':</span> <span class="pre">None,</span> <span class="pre">'skip':</span> <span class="pre">1,</span> <span class="pre">'slow_index':</span> <span class="pre">None,</span> <span class="pre">'slow_key':</span> <span class="pre">None,</span> <span class="pre">'slow_multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'recorded_distance':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'recorded_energy':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'offset':</span> <span class="pre">0.0},</span> <span class="pre">'recorded_psize':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.compute_scan_mapping_and_trajectory">
<span class="sig-name descname"><span class="pre">compute_scan_mapping_and_trajectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions_fast_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions_slow_shape</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.compute_scan_mapping_and_trajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>This horrendous block of logic is all to do with making a semi-intelligent guess at what the data looks like.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.get_corrected_intensities">
<span class="sig-name descname"><span class="pre">get_corrected_intensities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.get_corrected_intensities" title="Permalink to this definition">¶</a></dt>
<dd><p>Corrects the intensities for darkfield, flatfield and normalisations if they exist.
There is a lot of logic here, I wonder if there is a better way to get rid of it.
Limited a bit by the MPI, and thinking about extension to large data size.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.load_mapped_and_arbitrary_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_arbitrary_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.load_mapped_and_arbitrary_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.load_mapped_and_raster_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.load_mapped_and_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.load_unmapped_raster_scan">
<span class="sig-name descname"><span class="pre">load_unmapped_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.load_unmapped_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5Loader.subtract_dark">
<span class="sig-name descname"><span class="pre">subtract_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5Loader.subtract_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract dark current from a raw frame
and truncate negative values</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.hdf5_loader.</span></span><span class="sig-name descname"><span class="pre">Hdf5LoaderFast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.experiment.hdf5_loader.Hdf5Loader" title="ptypy.experiment.hdf5_loader.Hdf5Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.experiment.hdf5_loader.Hdf5Loader</span></code></a></p>
<p>hdf5 data loader</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'darkfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'electron_data':</span> <span class="pre">False,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'flatfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'framefilter':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'frameorder':</span> <span class="pre">{'indices':</span> <span class="pre">None},</span> <span class="pre">'intensities':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'mask':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'invert':</span> <span class="pre">False,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'Hdf5Loader',</span> <span class="pre">'normalisation':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'sigma':</span> <span class="pre">3},</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'outer_index':</span> <span class="pre">None,</span> <span class="pre">'padding':</span> <span class="pre">None,</span> <span class="pre">'positions':</span> <span class="pre">{'bounding_box':</span> <span class="pre">{'fast_axis_bounds':</span> <span class="pre">None,</span> <span class="pre">'slow_axis_bounds':</span> <span class="pre">None},</span> <span class="pre">'fast_index':</span> <span class="pre">None,</span> <span class="pre">'fast_key':</span> <span class="pre">None,</span> <span class="pre">'fast_multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'file':</span> <span class="pre">None,</span> <span class="pre">'skip':</span> <span class="pre">1,</span> <span class="pre">'slow_index':</span> <span class="pre">None,</span> <span class="pre">'slow_key':</span> <span class="pre">None,</span> <span class="pre">'slow_multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'recorded_distance':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'recorded_energy':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'offset':</span> <span class="pre">0.0},</span> <span class="pre">'recorded_psize':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.get_corrected_intensities">
<span class="sig-name descname"><span class="pre">get_corrected_intensities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indexed_frame_slice</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.get_corrected_intensities" title="Permalink to this definition">¶</a></dt>
<dd><p>Corrects the intensities for normalisation and padding</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_mapped_and_arbitrary_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_arbitrary_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_mapped_and_arbitrary_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_mapped_and_raster_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_mapped_and_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_multiprocessing">
<span class="sig-name descname"><span class="pre">load_multiprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_slices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_multiprocessing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_unmapped_raster_scan">
<span class="sig-name descname"><span class="pre">load_unmapped_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.load_unmapped_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.hdf5_loader.Hdf5LoaderFast.subtract_dark">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subtract_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.hdf5_loader.Hdf5LoaderFast.subtract_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract dark current from a raw frame
and truncate negative values</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-ptypy.experiment.optiklabor">
<span id="ptypy-experiment-optiklabor-module"></span><h2>ptypy.experiment.optiklabor module<a class="headerlink" href="#module-ptypy.experiment.optiklabor" title="Permalink to this headline">¶</a></h2>
<p>Created on Nov 22 2013</p>
<p>&#64;author: Bjeorn Enders</p>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.optiklabor.FliSpecScanMultexp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.optiklabor.</span></span><span class="sig-name descname"><span class="pre">FliSpecScanMultexp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Class creation with minimum set of parameters, see <code class="xref py py-data docutils literal notranslate"><span class="pre">PtyScan.DEFAULT</span></code>
Please note that class creation is not meant to load data.</p>
<p>Call <code class="xref py py-data docutils literal notranslate"><span class="pre">initialize</span></code> to begin loading and data file creation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.optiklabor.FliSpecScanMultexp.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'base_path':</span> <span class="pre">'/data/CDI/opticslab_sxdm_2013/',</span> <span class="pre">'center':</span> <span class="pre">'auto',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'dark_dir_pattern':</span> <span class="pre">'%(base_path)s%(scan_dir)sS%(dark_number)05d/',</span> <span class="pre">'dark_number':</span> <span class="pre">72,</span> <span class="pre">'data_dir_pattern':</span> <span class="pre">'%(base_path)s%(scan_dir)sS%(scan_number)05d/',</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">None,</span> <span class="pre">'exp_string':</span> <span class="pre">'exp_time',</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'hdr_thresholds':</span> <span class="pre">[500,</span> <span class="pre">50000],</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'lam':</span> <span class="pre">6.5e-07,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'log_file_pattern':</span> <span class="pre">'%(base_path)sspec/dat-files/spec_started_2013_11_21_1659.dat',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'FliSpecScanMultexp',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">(True,</span> <span class="pre">True,</span> <span class="pre">False),</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'psize_det':</span> <span class="pre">2.4e-05,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'scan_dir':</span> <span class="pre">'ccdfli/S00000-00999/',</span> <span class="pre">'scan_number':</span> <span class="pre">74,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'version':</span> <span class="pre">0.1,</span> <span class="pre">'z':</span> <span class="pre">0.158}</span></em><a class="headerlink" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.optiklabor.FliSpecScanMultexp.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames_requested</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.check" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.</p>
<p>This method is supposed to return the number of accessible frames
for preparation and should determine if data acquisition for this
scan is finished. Its main purpose is to allow for a data
acquisition scheme, where the number of frames is not known
when <code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code> is constructed, i.e. a data stream or an
on-the-fly reconstructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="xref py py-data docutils literal notranslate"><span class="pre">num_frames</span></code> is set on <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> of the subclass,
this method can be left as it is.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>int</em><em> or </em><em>None</em>) – Number of frames requested.</p></li>
<li><p><strong>start</strong> (<em>int</em><em> or </em><em>None</em>) – Scanpoint index to start checking from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>frames_accessible</strong> (<em>int</em>) – Number of frames readable.</p></li>
<li><p><strong>end_of_scan</strong> (<em>int or None</em>) – is one of the following,
- 0, end of the scan is not reached
- 1, end of scan will be reached or is
- None, can’t say</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.optiklabor.FliSpecScanMultexp.correct">
<span class="sig-name descname"><span class="pre">correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.correct" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Place holder for dark and flatfield correction. If <a class="reference internal" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.load" title="ptypy.experiment.optiklabor.FliSpecScanMultexp.load"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">load</span></code></a>
already provides data in the form of photon counts, and no frame
specific weight is needed, this method may be left as it is.</p>
<p>May get <em>merged</em> with <a class="reference internal" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.load" title="ptypy.experiment.optiklabor.FliSpecScanMultexp.load"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">load</span></code></a> in future.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>data, weights</strong> – Flat and dark-corrected data dictionaries. These dictionaries
must have the same keys as the input <cite>raw</cite> and contain
corrected frames (<cite>data</cite>) and statistical weights (<cite>weights</cite>)
which are zero for invalid or masked pixel other the number
of detector counts that correspond to one photon count</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.optiklabor.FliSpecScanMultexp.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.load" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, positions, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the <em>most</em> important method to change when subclassing
<code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code>. Most often it suffices to override the constructor
and this method to create a subclass suited for a specific
experiment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.optiklabor.FliSpecScanMultexp.load_common">
<span class="sig-name descname"><span class="pre">load_common</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.optiklabor.FliSpecScanMultexp.load_common" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads anything and stores that in a dict. This dict will be
available to all processes after <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code> through
the attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">common</span></code></p>
<p>The purpose of this method is the same as <code class="xref py py-meth docutils literal notranslate"><span class="pre">load_weight()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">load_positions()</span></code> except for that the contents
of <code class="xref py py-attr docutils literal notranslate"><span class="pre">common</span></code> have no built-in effect of the behavior in
the processing other than the user specifies it in py:meth:<cite>load</cite></p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>common</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-ptypy.experiment.plugin">
<span id="ptypy-experiment-plugin-module"></span><h2>ptypy.experiment.plugin module<a class="headerlink" href="#module-ptypy.experiment.plugin" title="Permalink to this headline">¶</a></h2>
<p>Scan loading plugin. Meant to make easier user-generated, problem-specific
data preparation.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="ptypy.experiment.plugin.makeScanPlugin">
<span class="sig-prename descclassname"><span class="pre">ptypy.experiment.plugin.</span></span><span class="sig-name descname"><span class="pre">makeScanPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.plugin.makeScanPlugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory wrapper that provides a PtyScan object.</p>
</dd></dl>

</section>
<section id="module-ptypy.experiment.spec">
<span id="ptypy-experiment-spec-module"></span><h2>ptypy.experiment.spec module<a class="headerlink" href="#module-ptypy.experiment.spec" title="Permalink to this headline">¶</a></h2>
<p>Utility module to read spec files
Adapted from spec_read.m by Andreas Menzel (PSI)</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.spec.SpecInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.spec.</span></span><span class="sig-name descname"><span class="pre">SpecInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec_filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.spec.SpecInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.spec.SpecInfo.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rehash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.spec.SpecInfo.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the spec dat-file and extract information.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.spec.SpecScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.spec.</span></span><span class="sig-name descname"><span class="pre">SpecScan</span></span><a class="headerlink" href="#ptypy.experiment.spec.SpecScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.experiment.spec.verbose">
<span class="sig-prename descclassname"><span class="pre">ptypy.experiment.spec.</span></span><span class="sig-name descname"><span class="pre">verbose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.spec.verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>This function should be replaced by the real verbose class after import.
It is here for convenience since this module has no other external dependencies.</p>
</dd></dl>

</section>
<section id="module-ptypy.experiment">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ptypy.experiment" title="Permalink to this headline">¶</a></h2>
<p>Beamline-specific data preparation modules.</p>
<dl class="simple">
<dt>Currently available:</dt><dd><ul class="simple">
<li><p>cSAXS</p></li>
<li><p>I13DLS, FFP and NFP</p></li>
<li><p>I08DLS, FFP and NFP</p></li>
<li><p>ID16A ESRF, NFP</p></li>
<li><p>AMO LCLS</p></li>
<li><p>DiProI FERMI</p></li>
<li><p>NanoMAX</p></li>
</ul>
</dd>
</dl>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.FliSpecScanMultexp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">FliSpecScanMultexp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.FliSpecScanMultexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Class creation with minimum set of parameters, see <a class="reference internal" href="#ptypy.experiment.PtyScan.DEFAULT" title="ptypy.experiment.PtyScan.DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">PtyScan.DEFAULT</span></code></a>
Please note that class creation is not meant to load data.</p>
<p>Call <code class="xref py py-data docutils literal notranslate"><span class="pre">initialize</span></code> to begin loading and data file creation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.FliSpecScanMultexp.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'base_path':</span> <span class="pre">'/data/CDI/opticslab_sxdm_2013/',</span> <span class="pre">'center':</span> <span class="pre">'auto',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'dark_dir_pattern':</span> <span class="pre">'%(base_path)s%(scan_dir)sS%(dark_number)05d/',</span> <span class="pre">'dark_number':</span> <span class="pre">72,</span> <span class="pre">'data_dir_pattern':</span> <span class="pre">'%(base_path)s%(scan_dir)sS%(scan_number)05d/',</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">None,</span> <span class="pre">'exp_string':</span> <span class="pre">'exp_time',</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'hdr_thresholds':</span> <span class="pre">[500,</span> <span class="pre">50000],</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'lam':</span> <span class="pre">6.5e-07,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'log_file_pattern':</span> <span class="pre">'%(base_path)sspec/dat-files/spec_started_2013_11_21_1659.dat',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'FliSpecScanMultexp',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">(True,</span> <span class="pre">True,</span> <span class="pre">False),</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'psize_det':</span> <span class="pre">2.4e-05,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'scan_dir':</span> <span class="pre">'ccdfli/S00000-00999/',</span> <span class="pre">'scan_number':</span> <span class="pre">74,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'version':</span> <span class="pre">0.1,</span> <span class="pre">'z':</span> <span class="pre">0.158}</span></em><a class="headerlink" href="#ptypy.experiment.FliSpecScanMultexp.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.FliSpecScanMultexp.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames_requested</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.FliSpecScanMultexp.check" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.</p>
<p>This method is supposed to return the number of accessible frames
for preparation and should determine if data acquisition for this
scan is finished. Its main purpose is to allow for a data
acquisition scheme, where the number of frames is not known
when <a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a> is constructed, i.e. a data stream or an
on-the-fly reconstructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="xref py py-data docutils literal notranslate"><span class="pre">num_frames</span></code> is set on <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> of the subclass,
this method can be left as it is.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>int</em><em> or </em><em>None</em>) – Number of frames requested.</p></li>
<li><p><strong>start</strong> (<em>int</em><em> or </em><em>None</em>) – Scanpoint index to start checking from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>frames_accessible</strong> (<em>int</em>) – Number of frames readable.</p></li>
<li><p><strong>end_of_scan</strong> (<em>int or None</em>) – is one of the following,
- 0, end of the scan is not reached
- 1, end of scan will be reached or is
- None, can’t say</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.FliSpecScanMultexp.correct">
<span class="sig-name descname"><span class="pre">correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.FliSpecScanMultexp.correct" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Place holder for dark and flatfield correction. If <a class="reference internal" href="#ptypy.experiment.FliSpecScanMultexp.load" title="ptypy.experiment.FliSpecScanMultexp.load"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">load</span></code></a>
already provides data in the form of photon counts, and no frame
specific weight is needed, this method may be left as it is.</p>
<p>May get <em>merged</em> with <a class="reference internal" href="#ptypy.experiment.FliSpecScanMultexp.load" title="ptypy.experiment.FliSpecScanMultexp.load"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">load</span></code></a> in future.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>data, weights</strong> – Flat and dark-corrected data dictionaries. These dictionaries
must have the same keys as the input <cite>raw</cite> and contain
corrected frames (<cite>data</cite>) and statistical weights (<cite>weights</cite>)
which are zero for invalid or masked pixel other the number
of detector counts that correspond to one photon count</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.FliSpecScanMultexp.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.FliSpecScanMultexp.load" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, positions, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the <em>most</em> important method to change when subclassing
<a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a>. Most often it suffices to override the constructor
and this method to create a subclass suited for a specific
experiment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.FliSpecScanMultexp.load_common">
<span class="sig-name descname"><span class="pre">load_common</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.FliSpecScanMultexp.load_common" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads anything and stores that in a dict. This dict will be
available to all processes after <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code> through
the attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">common</span></code></p>
<p>The purpose of this method is the same as <code class="xref py py-meth docutils literal notranslate"><span class="pre">load_weight()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">load_positions()</span></code> except for that the contents
of <code class="xref py py-attr docutils literal notranslate"><span class="pre">common</span></code> have no built-in effect of the behavior in
the processing other than the user specifies it in py:meth:<cite>load</cite></p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>common</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">Hdf5Loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swmr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>First attempt to make a generalised hdf5 loader for data. Please raise a ticket in github if changes are required
so we can coordinate. There will be a Nexus and CXI subclass to this in the future.</p>
<p>hdf5 data loader</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'darkfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'electron_data':</span> <span class="pre">False,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'flatfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'framefilter':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'frameorder':</span> <span class="pre">{'indices':</span> <span class="pre">None},</span> <span class="pre">'intensities':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'mask':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'invert':</span> <span class="pre">False,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'Hdf5Loader',</span> <span class="pre">'normalisation':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'sigma':</span> <span class="pre">3},</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'outer_index':</span> <span class="pre">None,</span> <span class="pre">'padding':</span> <span class="pre">None,</span> <span class="pre">'positions':</span> <span class="pre">{'bounding_box':</span> <span class="pre">{'fast_axis_bounds':</span> <span class="pre">None,</span> <span class="pre">'slow_axis_bounds':</span> <span class="pre">None},</span> <span class="pre">'fast_index':</span> <span class="pre">None,</span> <span class="pre">'fast_key':</span> <span class="pre">None,</span> <span class="pre">'fast_multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'file':</span> <span class="pre">None,</span> <span class="pre">'skip':</span> <span class="pre">1,</span> <span class="pre">'slow_index':</span> <span class="pre">None,</span> <span class="pre">'slow_key':</span> <span class="pre">None,</span> <span class="pre">'slow_multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'recorded_distance':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'recorded_energy':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'offset':</span> <span class="pre">0.0},</span> <span class="pre">'recorded_psize':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.compute_scan_mapping_and_trajectory">
<span class="sig-name descname"><span class="pre">compute_scan_mapping_and_trajectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions_fast_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions_slow_shape</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.compute_scan_mapping_and_trajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>This horrendous block of logic is all to do with making a semi-intelligent guess at what the data looks like.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.get_corrected_intensities">
<span class="sig-name descname"><span class="pre">get_corrected_intensities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.get_corrected_intensities" title="Permalink to this definition">¶</a></dt>
<dd><p>Corrects the intensities for darkfield, flatfield and normalisations if they exist.
There is a lot of logic here, I wonder if there is a better way to get rid of it.
Limited a bit by the MPI, and thinking about extension to large data size.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.load_mapped_and_arbitrary_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_arbitrary_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.load_mapped_and_arbitrary_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.load_mapped_and_raster_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.load_mapped_and_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.load_unmapped_raster_scan">
<span class="sig-name descname"><span class="pre">load_unmapped_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.load_unmapped_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5Loader.subtract_dark">
<span class="sig-name descname"><span class="pre">subtract_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5Loader.subtract_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract dark current from a raw frame
and truncate negative values</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">Hdf5LoaderFast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.experiment.hdf5_loader.Hdf5Loader" title="ptypy.experiment.hdf5_loader.Hdf5Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.experiment.hdf5_loader.Hdf5Loader</span></code></a></p>
<p>hdf5 data loader</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'darkfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'electron_data':</span> <span class="pre">False,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'flatfield':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'framefilter':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'frameorder':</span> <span class="pre">{'indices':</span> <span class="pre">None},</span> <span class="pre">'intensities':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'mask':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'invert':</span> <span class="pre">False,</span> <span class="pre">'key':</span> <span class="pre">None},</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'Hdf5Loader',</span> <span class="pre">'normalisation':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'sigma':</span> <span class="pre">3},</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'outer_index':</span> <span class="pre">None,</span> <span class="pre">'padding':</span> <span class="pre">None,</span> <span class="pre">'positions':</span> <span class="pre">{'bounding_box':</span> <span class="pre">{'fast_axis_bounds':</span> <span class="pre">None,</span> <span class="pre">'slow_axis_bounds':</span> <span class="pre">None},</span> <span class="pre">'fast_index':</span> <span class="pre">None,</span> <span class="pre">'fast_key':</span> <span class="pre">None,</span> <span class="pre">'fast_multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'file':</span> <span class="pre">None,</span> <span class="pre">'skip':</span> <span class="pre">1,</span> <span class="pre">'slow_index':</span> <span class="pre">None,</span> <span class="pre">'slow_key':</span> <span class="pre">None,</span> <span class="pre">'slow_multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'recorded_distance':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'recorded_energy':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0,</span> <span class="pre">'offset':</span> <span class="pre">0.0},</span> <span class="pre">'recorded_psize':</span> <span class="pre">{'file':</span> <span class="pre">None,</span> <span class="pre">'key':</span> <span class="pre">None,</span> <span class="pre">'multiplier':</span> <span class="pre">1.0},</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.get_corrected_intensities">
<span class="sig-name descname"><span class="pre">get_corrected_intensities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indexed_frame_slice</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.get_corrected_intensities" title="Permalink to this definition">¶</a></dt>
<dd><p>Corrects the intensities for normalisation and padding</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.load_mapped_and_arbitrary_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_arbitrary_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.load_mapped_and_arbitrary_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.load_mapped_and_raster_scan">
<span class="sig-name descname"><span class="pre">load_mapped_and_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.load_mapped_and_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.load_multiprocessing">
<span class="sig-name descname"><span class="pre">load_multiprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_slices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.load_multiprocessing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.load_unmapped_raster_scan">
<span class="sig-name descname"><span class="pre">load_unmapped_raster_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.load_unmapped_raster_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.Hdf5LoaderFast.subtract_dark">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subtract_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.Hdf5LoaderFast.subtract_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract dark current from a raw frame
and truncate negative values</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">ID16AScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Subclass of PtyScan for ID16A beamline (specifically for near-field
ptychography).</p>
<p>Default data parameters. See <code class="xref py py-data docutils literal notranslate"><span class="pre">scan.data</span></code></p>
<p>Create a PtyScan object that will load ID16A data.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">False,</span> <span class="pre">'base_path':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'dark_subtraction':</span> <span class="pre">False,</span> <span class="pre">'det_flat_field':</span> <span class="pre">None,</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'distortion_h_file':</span> <span class="pre">'/data/id16a/inhouse1/instrument/img1/optique_peter_distortion/detector_distortion2d_v.edf',</span> <span class="pre">'distortion_v_file':</span> <span class="pre">'/data/id16a/inhouse1/instrument/img1/optique_peter_distortion/detector_distortion2d_h.edf',</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'flat_division':</span> <span class="pre">False,</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'mask_file':</span> <span class="pre">None,</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'motors':</span> <span class="pre">['spy',</span> <span class="pre">'spz'],</span> <span class="pre">'motors_multiplier':</span> <span class="pre">1e-06,</span> <span class="pre">'name':</span> <span class="pre">'ID16AScan',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">(False,</span> <span class="pre">True,</span> <span class="pre">False),</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'recipe':</span> <span class="pre">{},</span> <span class="pre">'sample_name':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'version':</span> <span class="pre">0.1,</span> <span class="pre">'whitefield_file':</span> <span class="pre">'/data/id16a/inhouse1/instrument/whitefield/white.edf'}</span></em><a class="headerlink" href="#ptypy.experiment.ID16AScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.
Returns the number of frames available from starting index <cite>start</cite>, and
whether the end of the scan was reached.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>int</em><em> or </em><em>None</em>) – Number of frames requested</p></li>
<li><p><strong>start</strong> (<em>int</em><em> or </em><em>None</em>) – Scanpoint index to start checking from</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>frame_accessible</strong> (<em>int</em>) – Number of frames readable from a starting point <cite>start</cite></p></li>
<li><p><strong>end_of_scan</strong> (<em>bool or None</em>) – Check if the end of scan was reached, otherwise None if this
routine doesn’t know</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.correct">
<span class="sig-name descname"><span class="pre">correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan.correct" title="Permalink to this definition">¶</a></dt>
<dd><p>Place holder for dark and flatfield correction. Apply (eventual)
corrections to the raw frames. Convert from “raw” frames to
usable data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw</strong> (<em>dict</em>) – Dict containing index matched data frames (np.array).</p></li>
<li><p><strong>weights</strong> (<em>dict</em>) – Dict containing possible weights.</p></li>
<li><p><strong>common</strong> (<em>dict</em>) – Dict containing possible dark and flat frames.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data, weights</strong> – Flat and dark-corrected data dictionaries. These dictionaries
must have the same keys as the input <cite>raw</cite> and contain
corrected frames (<cite>data</cite>) and statistical weights (<cite>weights</cite>)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the negative values results from the calculation, they will
be forced to be equal to 0.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, pos, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If one weight (mask) is to be used for the whole scan, it should
be loaded with load_weights(). The same goes for the positions,
which sould be loade with load_positions().</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.load_common">
<span class="sig-name descname"><span class="pre">load_common</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan.load_common" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads anything that is common to all frames and stores it in dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>common</strong> – contains information common to all frames such as dark,
flat-field, detector flat-field, normalization couter,
and distortion files</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.load_positions">
<span class="sig-name descname"><span class="pre">load_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads all positions for all diffraction patterns in this scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>Positions</strong> – A (N,2)-array where <em>N</em> is the number of positions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.ID16AScan.load_weight">
<span class="sig-name descname"><span class="pre">load_weight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.ID16AScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Function description see parent class. For now, this function
will be used to load the mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>weight2d</strong> – A two-dimensional array with a shape compatible to the raw
diffraction data frames if provided from file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.MoonFlowerScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">MoonFlowerScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.MoonFlowerScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Test PtyScan class producing a romantic ptychographic data set of a moon
illuminating flowers.</p>
<p>Override parent class default:</p>
<p>Parent pars are for the</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.MoonFlowerScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">True,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'block_wait_count':</span> <span class="pre">0,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'density':</span> <span class="pre">0.2,</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'model':</span> <span class="pre">'round',</span> <span class="pre">'name':</span> <span class="pre">'MoonFlowerScan',</span> <span class="pre">'num_frames':</span> <span class="pre">100,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'photons':</span> <span class="pre">100000000.0,</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psf':</span> <span class="pre">0.0,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">128,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.MoonFlowerScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.MoonFlowerScan.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.MoonFlowerScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.</p>
<p>This method is supposed to return the number of accessible frames
for preparation and should determine if data acquisition for this
scan is finished. Its main purpose is to allow for a data
acquisition scheme, where the number of frames is not known
when <a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a> is constructed, i.e. a data stream or an
on-the-fly reconstructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="xref py py-data docutils literal notranslate"><span class="pre">num_frames</span></code> is set on <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> of the subclass,
this method can be left as it is.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>int</em><em> or </em><em>None</em>) – Number of frames requested.</p></li>
<li><p><strong>start</strong> (<em>int</em><em> or </em><em>None</em>) – Scanpoint index to start checking from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>frames_accessible</strong> (<em>int</em>) – Number of frames readable.</p></li>
<li><p><strong>end_of_scan</strong> (<em>int or None</em>) – is one of the following,
- 0, end of the scan is not reached
- 1, end of scan will be reached or is
- None, can’t say</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.MoonFlowerScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.MoonFlowerScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, positions, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the <em>most</em> important method to change when subclassing
<a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a>. Most often it suffices to override the constructor
and this method to create a subclass suited for a specific
experiment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.MoonFlowerScan.load_positions">
<span class="sig-name descname"><span class="pre">load_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.MoonFlowerScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads all positions for all diffraction patterns in this scan.
The positions loaded here will be available by all processes
through the attribute <code class="docutils literal notranslate"><span class="pre">self.positions</span></code>. If you specify position
on a per frame basis in <a class="reference internal" href="#ptypy.experiment.MoonFlowerScan.load" title="ptypy.experiment.MoonFlowerScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no
effect.</p>
<p>If theoretical positions <code class="xref py py-data docutils literal notranslate"><span class="pre">positions_theory</span></code> are
provided in the initial parameter set <a class="reference internal" href="#ptypy.experiment.MoonFlowerScan.DEFAULT" title="ptypy.experiment.MoonFlowerScan.DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEFAULT</span></code></a>,
specifying positions here has NO effect and will be ignored.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads on files that may require intense parsing to retrieve the
information, e.g. long SPEC log files. If parallel reads or
log file parsing for each set of frames is not a time critical
issue of the subclass, reimplementing this function can be ignored
and it is recommended to only reimplement the <a class="reference internal" href="#ptypy.experiment.MoonFlowerScan.load" title="ptypy.experiment.MoonFlowerScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a>
method.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>positions</strong> – A (N,2)-array where <em>N</em> is the number of positions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be aware that this method sets attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">num_frames</span></code>
in the following manner.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">==</span> <span class="pre">None</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&lt;</span> <span class="pre">N</span></code> , no effect.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&gt;</span> <span class="pre">N</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.MoonFlowerScan.load_weight">
<span class="sig-name descname"><span class="pre">load_weight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.MoonFlowerScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads a common (2d)-weight for all diffraction patterns. The weight
loaded here will be available by all processes through the
attribute <code class="docutils literal notranslate"><span class="pre">self.weight2d</span></code>. If a <em>per-frame-weight</em> is specified
in <a class="reference internal" href="#ptypy.experiment.MoonFlowerScan.load" title="ptypy.experiment.MoonFlowerScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no effect.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads. If that is not critical to the implementation,
reimplementing this function in a subclass can be ignored.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>weight2d</strong> – A two-dimensional array with a shape compatible to the raw
diffraction data frames</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, weights will be converted to a mask,
<code class="docutils literal notranslate"><span class="pre">mask</span> <span class="pre">=</span> <span class="pre">weight2d</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> for use in reconstruction algorithms.
It is planned to use a general weight instead of a mask in future
releases.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">PtyScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>PtyScan: A single ptychography scan, created on the fly or read from file.</p>
<p><em>BASECLASS</em></p>
<dl class="simple">
<dt>Objectives:</dt><dd><ul class="simple">
<li><p>Stand alone functionality</p></li>
<li><p>Can produce .ptyd data formats</p></li>
<li><p>Child instances should be able to prepare from raw data</p></li>
<li><p>On-the-fly support in form of chunked data.</p></li>
<li><p>mpi capable, child classes should not worry about mpi</p></li>
</ul>
</dd>
</dl>
<p>Default data parameters. See <code class="xref py py-data docutils literal notranslate"><span class="pre">scan.data</span></code></p>
<p>Class creation with minimum set of parameters, see <a class="reference internal" href="#ptypy.experiment.PtyScan.DEFAULT" title="ptypy.experiment.PtyScan.DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">PtyScan.DEFAULT</span></code></a>
Please note that class creation is not meant to load data.</p>
<p>Call <a class="reference internal" href="#ptypy.experiment.PtyScan.initialize" title="ptypy.experiment.PtyScan.initialize"><code class="xref py py-data docutils literal notranslate"><span class="pre">initialize</span></code></a> to begin loading and data file creation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.CODES">
<span class="sig-name descname"><span class="pre">CODES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'msg1':</span> <span class="pre">'Scan</span> <span class="pre">unfinished.</span> <span class="pre">More</span> <span class="pre">frames</span> <span class="pre">available</span> <span class="pre">after</span> <span class="pre">a</span> <span class="pre">pause',</span> <span class="pre">'msgEOS':</span> <span class="pre">'End</span> <span class="pre">of</span> <span class="pre">scan</span> <span class="pre">reached'}</span></em><a class="headerlink" href="#ptypy.experiment.PtyScan.CODES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'PtyScan',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.PtyScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.EOS">
<span class="sig-name descname"><span class="pre">EOS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'msgEOS'</span></em><a class="headerlink" href="#ptypy.experiment.PtyScan.EOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.METAKEYS">
<span class="sig-name descname"><span class="pre">METAKEYS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['version',</span> <span class="pre">'num_frames',</span> <span class="pre">'label',</span> <span class="pre">'shape',</span> <span class="pre">'psize',</span> <span class="pre">'energy',</span> <span class="pre">'center',</span> <span class="pre">'distance']</span></em><a class="headerlink" href="#ptypy.experiment.PtyScan.METAKEYS" title="Permalink to this definition">¶</a></dt>
<dd><p>Keys to store in meta param</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.WAIT">
<span class="sig-name descname"><span class="pre">WAIT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'msg1'</span></em><a class="headerlink" href="#ptypy.experiment.PtyScan.WAIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.abort">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">abort</span></span><a class="headerlink" href="#ptypy.experiment.PtyScan.abort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.auto">
<span class="sig-name descname"><span class="pre">auto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeated calls to this function will process the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>frames</strong> (<em>int</em>) – Number of frames to process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>one of the following</dt><dd><ul class="simple">
<li><p>WAIT, if scan’s end is not reached,
but no data could be prepared yet</p></li>
<li><p>EOS, if scan’s end is reached</p></li>
<li><p>a data package otherwise</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>variable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>This method checks how many frames the preparation routine may
process, starting from frame <cite>start</cite> at a request of <cite>frames</cite>.</p>
<p>This method is supposed to return the number of accessible frames
for preparation and should determine if data acquisition for this
scan is finished. Its main purpose is to allow for a data
acquisition scheme, where the number of frames is not known
when <a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a> is constructed, i.e. a data stream or an
on-the-fly reconstructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <a class="reference internal" href="#ptypy.experiment.PtyScan.num_frames" title="ptypy.experiment.PtyScan.num_frames"><code class="xref py py-data docutils literal notranslate"><span class="pre">num_frames</span></code></a> is set on <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> of the subclass,
this method can be left as it is.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>int</em><em> or </em><em>None</em>) – Number of frames requested.</p></li>
<li><p><strong>start</strong> (<em>int</em><em> or </em><em>None</em>) – Scanpoint index to start checking from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>frames_accessible</strong> (<em>int</em>) – Number of frames readable.</p></li>
<li><p><strong>end_of_scan</strong> (<em>int or None</em>) – is one of the following,
- 0, end of the scan is not reached
- 1, end of scan will be reached or is
- None, can’t say</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.correct">
<span class="sig-name descname"><span class="pre">correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.correct" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Place holder for dark and flatfield correction. If <a class="reference internal" href="#ptypy.experiment.PtyScan.load" title="ptypy.experiment.PtyScan.load"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">load</span></code></a>
already provides data in the form of photon counts, and no frame
specific weight is needed, this method may be left as it is.</p>
<p>May get <em>merged</em> with <a class="reference internal" href="#ptypy.experiment.PtyScan.load" title="ptypy.experiment.PtyScan.load"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">load</span></code></a> in future.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>data, weights</strong> – Flat and dark-corrected data dictionaries. These dictionaries
must have the same keys as the input <cite>raw</cite> and contain
corrected frames (<cite>data</cite>) and statistical weights (<cite>weights</cite>)
which are zero for invalid or masked pixel other the number
of detector counts that correspond to one photon count</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.end_of_scan">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">end_of_scan</span></span><a class="headerlink" href="#ptypy.experiment.PtyScan.end_of_scan" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.frames_accessible">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">frames_accessible</span></span><a class="headerlink" href="#ptypy.experiment.PtyScan.frames_accessible" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.get_data_chunk">
<span class="sig-name descname"><span class="pre">get_data_chunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunksize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.get_data_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>This function prepares a container that is compatible to data package.</p>
<p>This function is called from the auto() function.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.info">
<span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#ptypy.experiment.PtyScan.info" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Param</span></code> container that stores all input parameters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Begins the Data preparation and intended as the first method
that does read-write access on (large) data. Does the following:</p>
<ul class="simple">
<li><p>Creates a *.ptyd data file at location specified by
<code class="xref py py-data docutils literal notranslate"><span class="pre">dfile</span></code> (master node only)</p></li>
<li><p>Calls <a class="reference internal" href="#ptypy.experiment.PtyScan.load_weight" title="ptypy.experiment.PtyScan.load_weight"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_weight()</span></code></a>, <a class="reference internal" href="#ptypy.experiment.PtyScan.load_positions" title="ptypy.experiment.PtyScan.load_positions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_positions()</span></code></a>
<a class="reference internal" href="#ptypy.experiment.PtyScan.load_common" title="ptypy.experiment.PtyScan.load_common"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_common()</span></code></a> (master node only for
<code class="docutils literal notranslate"><span class="pre">load_parallel==None</span></code> or <code class="docutils literal notranslate"><span class="pre">load_parallel=='data'</span></code>)</p></li>
<li><p>Sets <a class="reference internal" href="#ptypy.experiment.PtyScan.num_frames" title="ptypy.experiment.PtyScan.num_frames"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_frames</span></code></a> if needed</p></li>
<li><p>Calls <a class="reference internal" href="#ptypy.experiment.PtyScan.post_initialize" title="ptypy.experiment.PtyScan.post_initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">post_initialize()</span></code></a></p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, positions, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the <em>most</em> important method to change when subclassing
<a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a>. Most often it suffices to override the constructor
and this method to create a subclass suited for a specific
experiment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.load_common">
<span class="sig-name descname"><span class="pre">load_common</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.load_common" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <a class="reference internal" href="#ptypy.experiment.PtyScan.initialize" title="ptypy.experiment.PtyScan.initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></a></p>
<p>Loads anything and stores that in a dict. This dict will be
available to all processes after <a class="reference internal" href="#ptypy.experiment.PtyScan.initialize" title="ptypy.experiment.PtyScan.initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></a> through
the attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">common</span></code></p>
<p>The purpose of this method is the same as <a class="reference internal" href="#ptypy.experiment.PtyScan.load_weight" title="ptypy.experiment.PtyScan.load_weight"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_weight()</span></code></a>
and <a class="reference internal" href="#ptypy.experiment.PtyScan.load_positions" title="ptypy.experiment.PtyScan.load_positions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_positions()</span></code></a> except for that the contents
of <code class="xref py py-attr docutils literal notranslate"><span class="pre">common</span></code> have no built-in effect of the behavior in
the processing other than the user specifies it in py:meth:<cite>load</cite></p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>common</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.load_positions">
<span class="sig-name descname"><span class="pre">load_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <a class="reference internal" href="#ptypy.experiment.PtyScan.initialize" title="ptypy.experiment.PtyScan.initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></a></p>
<p>Loads all positions for all diffraction patterns in this scan.
The positions loaded here will be available by all processes
through the attribute <code class="docutils literal notranslate"><span class="pre">self.positions</span></code>. If you specify position
on a per frame basis in <a class="reference internal" href="#ptypy.experiment.PtyScan.load" title="ptypy.experiment.PtyScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no
effect.</p>
<p>If theoretical positions <code class="xref py py-data docutils literal notranslate"><span class="pre">positions_theory</span></code> are
provided in the initial parameter set <a class="reference internal" href="#ptypy.experiment.PtyScan.DEFAULT" title="ptypy.experiment.PtyScan.DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEFAULT</span></code></a>,
specifying positions here has NO effect and will be ignored.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads on files that may require intense parsing to retrieve the
information, e.g. long SPEC log files. If parallel reads or
log file parsing for each set of frames is not a time critical
issue of the subclass, reimplementing this function can be ignored
and it is recommended to only reimplement the <a class="reference internal" href="#ptypy.experiment.PtyScan.load" title="ptypy.experiment.PtyScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a>
method.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>positions</strong> – A (N,2)-array where <em>N</em> is the number of positions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be aware that this method sets attribute <a class="reference internal" href="#ptypy.experiment.PtyScan.num_frames" title="ptypy.experiment.PtyScan.num_frames"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_frames</span></code></a>
in the following manner.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">==</span> <span class="pre">None</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&lt;</span> <span class="pre">N</span></code> , no effect.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&gt;</span> <span class="pre">N</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.load_weight">
<span class="sig-name descname"><span class="pre">load_weight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <a class="reference internal" href="#ptypy.experiment.PtyScan.initialize" title="ptypy.experiment.PtyScan.initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></a></p>
<p>Loads a common (2d)-weight for all diffraction patterns. The weight
loaded here will be available by all processes through the
attribute <code class="docutils literal notranslate"><span class="pre">self.weight2d</span></code>. If a <em>per-frame-weight</em> is specified
in <a class="reference internal" href="#ptypy.experiment.PtyScan.load" title="ptypy.experiment.PtyScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no effect.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads. If that is not critical to the implementation,
reimplementing this function in a subclass can be ignored.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>weight2d</strong> – A two-dimensional array with a shape compatible to the raw
diffraction data frames</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, weights will be converted to a mask,
<code class="docutils literal notranslate"><span class="pre">mask</span> <span class="pre">=</span> <span class="pre">weight2d</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> for use in reconstruction algorithms.
It is planned to use a general weight instead of a mask in future
releases.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.min_frames">
<span class="sig-name descname"><span class="pre">min_frames</span></span><a class="headerlink" href="#ptypy.experiment.PtyScan.min_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum number of frames to prepare / load
with call of <a class="reference internal" href="#ptypy.experiment.PtyScan.auto" title="ptypy.experiment.PtyScan.auto"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auto()</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.num_frames">
<span class="sig-name descname"><span class="pre">num_frames</span></span><a class="headerlink" href="#ptypy.experiment.PtyScan.num_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of frames to prepare / load.
Set by <code class="xref py py-data docutils literal notranslate"><span class="pre">num_frames</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.post_initialize">
<span class="sig-name descname"><span class="pre">post_initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.post_initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder. Called at the end of <a class="reference internal" href="#ptypy.experiment.PtyScan.initialize" title="ptypy.experiment.PtyScan.initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></a> by all
processes.</p>
<p>Use this method to benefit from ‘hard-to-retrieve but now available’
information after initialize.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtyScan.report">
<span class="sig-name descname"><span class="pre">report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtyScan.report" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a report on internal structure.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.PtydScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">PtydScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtydScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>PtyScan provided by native “ptyd” file format.</p>
<p>PtyScan provided by native “ptyd” file format.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.PtydScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'PtydScan',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'source':</span> <span class="pre">'file',</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.PtydScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtydScan.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtydScan.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of the check routine for a .ptyd file format.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.experiment.PtyScan.check" title="ptypy.experiment.PtyScan.check"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PtyScan.check</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtydScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtydScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load from ptyd.</p>
<p>Due to possible chunked data, slicing frames is non-trivial.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtydScan.load_positions">
<span class="sig-name descname"><span class="pre">load_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtydScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads all positions for all diffraction patterns in this scan.
The positions loaded here will be available by all processes
through the attribute <code class="docutils literal notranslate"><span class="pre">self.positions</span></code>. If you specify position
on a per frame basis in <a class="reference internal" href="#ptypy.experiment.PtydScan.load" title="ptypy.experiment.PtydScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no
effect.</p>
<p>If theoretical positions <code class="xref py py-data docutils literal notranslate"><span class="pre">positions_theory</span></code> are
provided in the initial parameter set <a class="reference internal" href="#ptypy.experiment.PtydScan.DEFAULT" title="ptypy.experiment.PtydScan.DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEFAULT</span></code></a>,
specifying positions here has NO effect and will be ignored.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads on files that may require intense parsing to retrieve the
information, e.g. long SPEC log files. If parallel reads or
log file parsing for each set of frames is not a time critical
issue of the subclass, reimplementing this function can be ignored
and it is recommended to only reimplement the <a class="reference internal" href="#ptypy.experiment.PtydScan.load" title="ptypy.experiment.PtydScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a>
method.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>positions</strong> – A (N,2)-array where <em>N</em> is the number of positions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be aware that this method sets attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">num_frames</span></code>
in the following manner.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">==</span> <span class="pre">None</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&lt;</span> <span class="pre">N</span></code> , no effect.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&gt;</span> <span class="pre">N</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.PtydScan.load_weight">
<span class="sig-name descname"><span class="pre">load_weight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.PtydScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads a common (2d)-weight for all diffraction patterns. The weight
loaded here will be available by all processes through the
attribute <code class="docutils literal notranslate"><span class="pre">self.weight2d</span></code>. If a <em>per-frame-weight</em> is specified
in <a class="reference internal" href="#ptypy.experiment.PtydScan.load" title="ptypy.experiment.PtydScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no effect.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads. If that is not critical to the implementation,
reimplementing this function in a subclass can be ignored.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>weight2d</strong> – A two-dimensional array with a shape compatible to the raw
diffraction data frames</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, weights will be converted to a mask,
<code class="docutils literal notranslate"><span class="pre">mask</span> <span class="pre">=</span> <span class="pre">weight2d</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> for use in reconstruction algorithms.
It is planned to use a general weight instead of a mask in future
releases.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.QuickScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">QuickScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.QuickScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Test PtyScan to benchmark graph creation further down the line.</p>
<p>Override parent class default:</p>
<p>Parent pars are for the</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.QuickScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'density':</span> <span class="pre">0.05,</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'MoonFlowerScan',</span> <span class="pre">'num_frames':</span> <span class="pre">100,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">64,</span> <span class="pre">'version':</span> <span class="pre">0.1}</span></em><a class="headerlink" href="#ptypy.experiment.QuickScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.QuickScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.QuickScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p>Loads data according to node specific scanpoint indices that have
been determined by <code class="xref py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code> or otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>raw, positions, weight</strong> – Dictionaries whose keys are the given scan point <cite>indices</cite>
and whose values are the respective frame / position according
to the scan point index. <cite>weight</cite> and <cite>positions</cite> may be empty</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the <em>most</em> important method to change when subclassing
<a class="reference internal" href="#ptypy.experiment.PtyScan" title="ptypy.experiment.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">PtyScan</span></code></a>. Most often it suffices to override the constructor
and this method to create a subclass suited for a specific
experiment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.QuickScan.load_positions">
<span class="sig-name descname"><span class="pre">load_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.QuickScan.load_positions" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads all positions for all diffraction patterns in this scan.
The positions loaded here will be available by all processes
through the attribute <code class="docutils literal notranslate"><span class="pre">self.positions</span></code>. If you specify position
on a per frame basis in <a class="reference internal" href="#ptypy.experiment.QuickScan.load" title="ptypy.experiment.QuickScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no
effect.</p>
<p>If theoretical positions <code class="xref py py-data docutils literal notranslate"><span class="pre">positions_theory</span></code> are
provided in the initial parameter set <a class="reference internal" href="#ptypy.experiment.QuickScan.DEFAULT" title="ptypy.experiment.QuickScan.DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEFAULT</span></code></a>,
specifying positions here has NO effect and will be ignored.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads on files that may require intense parsing to retrieve the
information, e.g. long SPEC log files. If parallel reads or
log file parsing for each set of frames is not a time critical
issue of the subclass, reimplementing this function can be ignored
and it is recommended to only reimplement the <a class="reference internal" href="#ptypy.experiment.QuickScan.load" title="ptypy.experiment.QuickScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a>
method.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>positions</strong> – A (N,2)-array where <em>N</em> is the number of positions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be aware that this method sets attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">num_frames</span></code>
in the following manner.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">==</span> <span class="pre">None</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&lt;</span> <span class="pre">N</span></code> , no effect.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">&gt;</span> <span class="pre">N</span></code> : <code class="docutils literal notranslate"><span class="pre">num_frames</span> <span class="pre">=</span> <span class="pre">N</span></code>.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.QuickScan.load_weight">
<span class="sig-name descname"><span class="pre">load_weight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.QuickScan.load_weight" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Override in subclass for custom implementation</strong></p>
<p><em>Called in</em> <code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></p>
<p>Loads a common (2d)-weight for all diffraction patterns. The weight
loaded here will be available by all processes through the
attribute <code class="docutils literal notranslate"><span class="pre">self.weight2d</span></code>. If a <em>per-frame-weight</em> is specified
in <a class="reference internal" href="#ptypy.experiment.QuickScan.load" title="ptypy.experiment.QuickScan.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a> , this function has no effect.</p>
<p>The purpose of this function is to avoid reloading and parallel
reads. If that is not critical to the implementation,
reimplementing this function in a subclass can be ignored.</p>
<p>If <cite>load_parallel</cite> is set to <cite>all</cite> or common`, this function is
executed by all nodes, otherwise the master node executes this
function and broadcasts the results to other nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>weight2d</strong> – A two-dimensional array with a shape compatible to the raw
diffraction data frames</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, weights will be converted to a mask,
<code class="docutils literal notranslate"><span class="pre">mask</span> <span class="pre">=</span> <span class="pre">weight2d</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> for use in reconstruction algorithms.
It is planned to use a general weight instead of a mask in future
releases.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.experiment.SimScan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.experiment.</span></span><span class="sig-name descname"><span class="pre">SimScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.SimScan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ptypy.core.html#ptypy.core.data.PtyScan" title="ptypy.core.data.PtyScan"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.core.data.PtyScan</span></code></a></p>
<p>Simulates a ptychographic scan and acts as Virtual data source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pars</strong> (<a class="reference internal" href="ptypy.utils.html#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) – PtyScan parameters. See <a class="reference internal" href="parameters.html#scandata.SimScan" title="scandata.SimScan"><code class="xref py py-data docutils literal notranslate"><span class="pre">scandata.SimScan</span></code></a>.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.experiment.SimScan.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'add_poisson_noise':</span> <span class="pre">False,</span> <span class="pre">'auto_center':</span> <span class="pre">None,</span> <span class="pre">'center':</span> <span class="pre">'fftshift',</span> <span class="pre">'chunk_format':</span> <span class="pre">'.chunk%02d',</span> <span class="pre">'detector':</span> <span class="pre">{},</span> <span class="pre">'dfile':</span> <span class="pre">None,</span> <span class="pre">'distance':</span> <span class="pre">7.19,</span> <span class="pre">'energy':</span> <span class="pre">7.2,</span> <span class="pre">'experimentID':</span> <span class="pre">None,</span> <span class="pre">'frame_size':</span> <span class="pre">None,</span> <span class="pre">'illumination':</span> <span class="pre">{'aperture':</span> <span class="pre">{'central_stop':</span> <span class="pre">None,</span> <span class="pre">'diffuser':</span> <span class="pre">None,</span> <span class="pre">'edge':</span> <span class="pre">2.0,</span> <span class="pre">'form':</span> <span class="pre">'circ',</span> <span class="pre">'offset':</span> <span class="pre">0.0,</span> <span class="pre">'rotate':</span> <span class="pre">0.0,</span> <span class="pre">'size':</span> <span class="pre">None},</span> <span class="pre">'diversity':</span> <span class="pre">{'noise':</span> <span class="pre">(0.5,</span> <span class="pre">1.0),</span> <span class="pre">'power':</span> <span class="pre">0.1,</span> <span class="pre">'shift':</span> <span class="pre">None},</span> <span class="pre">'model':</span> <span class="pre">None,</span> <span class="pre">'photons':</span> <span class="pre">None,</span> <span class="pre">'propagation':</span> <span class="pre">{'antialiasing':</span> <span class="pre">1,</span> <span class="pre">'focussed':</span> <span class="pre">None,</span> <span class="pre">'parallel':</span> <span class="pre">None,</span> <span class="pre">'spot_size':</span> <span class="pre">None},</span> <span class="pre">'recon':</span> <span class="pre">{'label':</span> <span class="pre">None,</span> <span class="pre">'rfile':</span> <span class="pre">'\\*.ptyr'}},</span> <span class="pre">'label':</span> <span class="pre">None,</span> <span class="pre">'load_parallel':</span> <span class="pre">'data',</span> <span class="pre">'min_frames':</span> <span class="pre">1,</span> <span class="pre">'name':</span> <span class="pre">'SimScan',</span> <span class="pre">'num_frames':</span> <span class="pre">None,</span> <span class="pre">'orientation':</span> <span class="pre">None,</span> <span class="pre">'plot':</span> <span class="pre">True,</span> <span class="pre">'pos_drift':</span> <span class="pre">0.0,</span> <span class="pre">'pos_noise':</span> <span class="pre">1e-10,</span> <span class="pre">'pos_scale':</span> <span class="pre">0.0,</span> <span class="pre">'positions_theory':</span> <span class="pre">None,</span> <span class="pre">'propagation':</span> <span class="pre">'farfield',</span> <span class="pre">'psf':</span> <span class="pre">None,</span> <span class="pre">'psize':</span> <span class="pre">0.000172,</span> <span class="pre">'rebin':</span> <span class="pre">None,</span> <span class="pre">'sample':</span> <span class="pre">{'diversity':</span> <span class="pre">{'noise':</span> <span class="pre">None,</span> <span class="pre">'power':</span> <span class="pre">0.1,</span> <span class="pre">'shift':</span> <span class="pre">None},</span> <span class="pre">'fill':</span> <span class="pre">1,</span> <span class="pre">'model':</span> <span class="pre">None,</span> <span class="pre">'process':</span> <span class="pre">{'density':</span> <span class="pre">1,</span> <span class="pre">'formula':</span> <span class="pre">None,</span> <span class="pre">'offset':</span> <span class="pre">(0,</span> <span class="pre">0),</span> <span class="pre">'ref_index':</span> <span class="pre">(0.5,</span> <span class="pre">0.0),</span> <span class="pre">'smoothing':</span> <span class="pre">2,</span> <span class="pre">'thickness':</span> <span class="pre">1e-06,</span> <span class="pre">'zoom':</span> <span class="pre">None},</span> <span class="pre">'recon':</span> <span class="pre">{'rfile':</span> <span class="pre">'\\*.ptyr'},</span> <span class="pre">'stxm':</span> <span class="pre">{'label':</span> <span class="pre">None}},</span> <span class="pre">'save':</span> <span class="pre">None,</span> <span class="pre">'shape':</span> <span class="pre">256,</span> <span class="pre">'verbose_level':</span> <span class="pre">1,</span> <span class="pre">'version':</span> <span class="pre">0.1,</span> <span class="pre">'xy':</span> <span class="pre">{'count':</span> <span class="pre">None,</span> <span class="pre">'extent':</span> <span class="pre">1.5e-05,</span> <span class="pre">'jitter':</span> <span class="pre">None,</span> <span class="pre">'model':</span> <span class="pre">None,</span> <span class="pre">'offset':</span> <span class="pre">0.0,</span> <span class="pre">'override':</span> <span class="pre">None,</span> <span class="pre">'spacing':</span> <span class="pre">1.5e-06,</span> <span class="pre">'steps':</span> <span class="pre">10}}</span></em><a class="headerlink" href="#ptypy.experiment.SimScan.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.SimScan.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.SimScan.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data, weights and positions from internal dictionarys</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.experiment.SimScan.manipulate_ptycho">
<span class="sig-name descname"><span class="pre">manipulate_ptycho</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ptycho</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.experiment.SimScan.manipulate_ptycho" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrite in child class for inline manipulation
of the ptycho instance that is created by the Simulation</p>
</dd></dl>

</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../content.html">
              <img class="logo" src="../_static/logo_100px.png" alt="Logo"/>
            </a></p>
<h3><a href="../content.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started with Ptypy</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">Concepts and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_management.html">Data management</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameter tree structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ptypy.html">ptypy package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ptypy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ptypy.core.html">ptypy.core package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.engines.html">ptypy.engines package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ptypy.experiment package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.io.html">ptypy.io package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.resources.html">ptypy.resources package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.simulations.html">ptypy.simulations package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.utils.html">ptypy.utils package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.debug.html">ptypy.debug package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ptypy.html#module-ptypy">Module contents</a></li>
</ul>
</li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="ptypy.engines.html"
                          title="previous chapter">ptypy.engines package</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ptypy.io.html"
                          title="next chapter">ptypy.io package</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/rst/ptypy.experiment.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptypy.io.html" title="ptypy.io package"
             >next</a> |</li>
        <li class="right" >
          <a href="ptypy.engines.html" title="ptypy.engines package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../content.html">ptypy 0.8.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ptypy.html" >ptypy package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ptypy.experiment package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Pierre Thibault, Bjoern Enders and others.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>
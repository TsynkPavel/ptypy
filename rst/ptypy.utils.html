
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ptypy.utils package &#8212; ptypy 0.8.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/header.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/ptypyicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ptypy.debug package" href="ptypy.debug.html" />
    <link rel="prev" title="ptypy.simulations package" href="ptypy.simulations.html" />
<link href='http://fonts.googleapis.com/css?family=PT+Sans|Ubuntu|Cuprum' rel='stylesheet' type='text/css'>

  </head><body>



<div class="pageheader">
  <ul>
    <li><a href="http://ptycho.github.io/ptypy">Home</a></li>
    <li><a href="http://www.github.com/ptycho/ptypy">Github</a></li>
    <li><a href="../content.html">Docs</a></li>
    <!-- <li><a href="develop.html">Extend/Develop</a></li> -->
  </ul>
  <div>
    <a href="../index.html"><img src="../_static/logo_60px.png" alt="SPHINX" /></a>

    <h0 style="padding-bottom:40px">Ptychography for Python</h0>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptypy.debug.html" title="ptypy.debug package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ptypy.simulations.html" title="ptypy.simulations package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../content.html">ptypy 0.8.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ptypy.html" accesskey="U">ptypy package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ptypy.utils package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ptypy-utils-package">
<h1>ptypy.utils package<a class="headerlink" href="#ptypy-utils-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-ptypy.utils.array_utils">
<span id="ptypy-utils-array-utils-module"></span><h2>ptypy.utils.array_utils module<a class="headerlink" href="#module-ptypy.utils.array_utils" title="Permalink to this headline">¶</a></h2>
<p>utility functions to manipulate/reshape numpy arrays.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.c_zoom">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">c_zoom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.c_zoom" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated</em>, kept for backward compatibility only.</p>
<p>Wrapper <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.zoom.html">scipy.ndimage.zoom</a> function and shares
the same input arguments.</p>
<p>It performs a complex overlaod if the input is complex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<em>numpy.ndarray</em>) – Array to shiftzoom. Can be float or complex</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zoomed array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.crop_pad">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">crop_pad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hplane_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillpar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filltype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scalar'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.crop_pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops or pads a volume array <cite>A</cite> with a number of hyperplanes according to parameters in <cite>hplanes</cite>
Wrapper for crop_pad_axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – input array of any shape</p></li>
<li><p><strong>hplane_list</strong> (<em>array-like</em><em>, </em><em>list</em>) – list of scalars or tupels counting the number of hyperplanes to crop / pad
see crop_pad_axis() for detail. If N=len(hplane_list) has less entries than dimensions of A, the last N axes are used</p></li>
<li><p><strong>axes</strong> (<em>tuple</em><em>, </em><em>list</em>) – tuple / list of axes to be used for cropping / padding, has to be same length as hplanes</p></li>
<li><p><strong>cen</strong> – center of array, padding/cropping occurs at cen + A.shape / 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cropped or padded array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.array_utils.crop_pad_axis" title="ptypy.utils.array_utils.crop_pad_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad_axis</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">crop_pad</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Pads 4 planes of zeros on the last axis (2 on low side and 2 on high
side) and pads 3 planes of zeros on the second last axis (2 on low
side and 1 on high side):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">=</span><span class="n">crop_pad</span><span class="p">(</span><span class="n">V</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<p>Also equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">=</span><span class="n">crop_pad</span><span class="p">(</span><span class="n">V</span><span class="p">,[(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">=</span><span class="n">crop_pad</span><span class="p">(</span><span class="n">V</span><span class="p">,[(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)],</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">fillpar</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">filltype</span><span class="o">=</span><span class="s1">&#39;scalar&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>None-peripheral cropping /padding:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">grids</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fftshift_grid</span> <span class="o">=</span> <span class="n">grids</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">center</span> <span class="o">=</span> <span class="s1">&#39;fft&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cropped_grid</span><span class="o">=</span><span class="n">crop_pad</span><span class="p">(</span><span class="n">V</span><span class="p">,[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">cen</span><span class="o">=</span><span class="s1">&#39;fft&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that cropping/ padding now occurs at the start and end of fourier coordinates
useful for cropping /padding high frequencies in fourier space.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.crop_pad_axis">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">crop_pad_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hplanes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillpar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filltype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scalar'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.crop_pad_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops or pads a volume array <cite>A</cite> at beginning and end of axis <cite>axis</cite>
with a number of hyperplanes specified by <cite>hplanes</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – Input array, should be at least one-dimensional</p></li>
<li><p><strong>hplanes</strong> (<em>int</em><em> or </em><em>tuple of int</em>) – Number of hyperplanes to add or remove in total.
If tuple of 2 ints, this value is interpreted as <cite>(begin, end)</cite>.
See the <code class="docutils literal notranslate"><span class="pre">Note</span></code> for more information.</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>optional</em>) – axis to be used for cropping / padding</p></li>
<li><p><strong>roll</strong> (<em>int</em><em>,</em>) – Roll array backwards by this number prior to padding / cropping.
The roll is reversed afterwards</p></li>
<li><p><strong>fillpar</strong> – See <a class="reference internal" href="#ptypy.utils.array_utils.pad_lr" title="ptypy.utils.array_utils.pad_lr"><code class="xref any py py-func docutils literal notranslate"><span class="pre">pad_lr</span></code></a> for explqanation</p></li>
<li><p><strong>filltype</strong> – See <a class="reference internal" href="#ptypy.utils.array_utils.pad_lr" title="ptypy.utils.array_utils.pad_lr"><code class="xref any py py-func docutils literal notranslate"><span class="pre">pad_lr</span></code></a> for explqanation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cropped / padded array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.array_utils.pad_lr" title="ptypy.utils.array_utils.pad_lr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pad_lr</span></code></a>, <a class="reference internal" href="#ptypy.utils.array_utils.crop_pad" title="ptypy.utils.array_utils.crop_pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad</span></code></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><dl class="simple">
<dt>if <cite>hplanes</cite> is scalar and negativ :</dt><dd><p>crops symmetrically, low-index end of axis is preferred if hplane is odd,</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if <cite>hplanes</cite> is scalar and positiv :</dt><dd><p>pads symmetrically with a fill specified with ‘fillpar’ and ‘filltype’
look at function pad_lr() for detail.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if <cite>hplanes</cite> is tupel :</dt><dd><p>function pads /crops at (begin, end) according to the tupel.</p>
</dd>
</dl>
</li>
</ul>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">crop_pad_axis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
</pre></div>
</div>
<p>Add a total of 2 rows, one at top, one at bottom.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">=</span><span class="n">crop_pad_axis</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>That is the same as</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">crop_pad_axis</span><span class="p">(</span><span class="n">A</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>Crop 3 columns on the left side and pad 2 columns on the right:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">crop_pad_axis</span><span class="p">(</span><span class="n">A</span><span class="p">,(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Crop one plane on low-side and high-side (total of 2) of Volume V:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">V</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">=</span><span class="n">crop_pad_axis</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Mirror volume 3 planes on low side of row axis, crop 2 planes on high side:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">=</span><span class="n">crop_pad_axis</span><span class="p">(</span><span class="n">V</span><span class="p">,(</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="n">filltype</span><span class="o">=</span><span class="s1">&#39;mirror&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.crop_pad_symmetric_2d">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">crop_pad_symmetric_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newshape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.crop_pad_symmetric_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Crops or pads Array <cite>A</cite> symmetrically along the last two axes <cite>(-2,-1)</cite>
around center <cite>center</cite> to a new shape <cite>newshape</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – Input array, must be at least two-dimensional.</p></li>
<li><p><strong>newshape</strong> (<em>tuple</em><em>, </em><em>array_like</em>) – New shape (for the last two axes). Must have at least 2 entries.</p></li>
<li><p><strong>center</strong> (<em>tuple</em><em>, </em><em>array_like</em><em>, </em><em>optional</em>) – This coordinate tuple marks the center for cropping / padding
If None, <code class="docutils literal notranslate"><span class="pre">np.array(A.shape[-2:])</span> <span class="pre">//</span> <span class="pre">2</span></code> will be the center</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>out</strong> (<em>ndarray</em>) – Cropped or padded array with shape <code class="docutils literal notranslate"><span class="pre">A.shape[:-2]+newshape[-2:]</span></code></p></li>
<li><p><strong>center</strong> (<em>tuple</em>) – Center in returned array, should be in the actual center of array.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.array_utils.crop_pad_axis" title="ptypy.utils.array_utils.crop_pad_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad_axis</span></code></a>, <a class="reference internal" href="#ptypy.utils.array_utils.crop_pad" title="ptypy.utils.array_utils.crop_pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.ellipsis">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">ellipsis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ew</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.ellipsis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.grids">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">grids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geometric'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FFTlike</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.grids" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">q0,q1,...</span> <span class="pre">=</span> <span class="pre">grids(sh)</span></code>
returns centered coordinates for a N-dimensional array of shape sh (pixel units)</p>
<p><code class="docutils literal notranslate"><span class="pre">q0,q1,...</span> <span class="pre">=</span> <span class="pre">grids(sh,psize)</span></code>
gives the coordinates scaled according to the given pixel size psize.</p>
<p><code class="docutils literal notranslate"><span class="pre">q0,q1,...</span> <span class="pre">=</span> <span class="pre">grids(sh,center='fftshift')</span></code>
gives the coordinates shifted according to fftshift convention for the origin</p>
<p><code class="docutils literal notranslate"><span class="pre">q0,q1,...</span> <span class="pre">=</span> <span class="pre">grids(sh,psize,center=(c0,c1,c2,...))</span></code>
gives the coordinates according scaled with psize having the origin at (c0,c1,..)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sh</strong> (<em>tuple of int</em>) – The shape of the N-dimensional array</p></li>
<li><p><strong>psize</strong> (<em>float</em><em> or </em><em>tuple of float</em>) – Pixel size in each dimensions</p></li>
<li><p><strong>center</strong> (<em>tupel of int</em>) – Tuple of pixel, or use <code class="docutils literal notranslate"><span class="pre">center='fftshift'</span></code> for fftshift-like grid
and <code class="docutils literal notranslate"><span class="pre">center='geometric'</span></code> for the matrix center as grid origin</p></li>
<li><p><strong>FFTlike</strong> (<em>bool</em>) – If False, grids ar not bound by the interval [-sh//2:sh//2[</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The coordinate grids</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.mirror">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">mirror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.mirror" title="Permalink to this definition">¶</a></dt>
<dd><p>Mirrors array <cite>A</cite> along one axis <cite>axis</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – Input array</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>optional</em>) – Axis along which the array will be mirrored</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view to the mirrored array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.pad_lr">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">pad_lr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillpar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filltype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scalar'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.pad_lr" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads ndarray <cite>A</cite> orthogonal to <cite>axis</cite> with <cite>l</cite> layers
(pixels,lines,planes,…) on low side an <cite>r</cite> layers on high side.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – Input array</p></li>
<li><p><strong>axis</strong> (<em>int</em>) – Pads orthogonal to <cite>axis</cite> on with <cite>l</cite> layers (pixels,lines,
planes,…) on low side an <cite>r</cite> layers on high side.</p></li>
<li><p><strong>l</strong> (<em>int</em>) – Pads orthogonal to <cite>axis</cite> on with <cite>l</cite> layers (pixels,lines,
planes,…) on low side an <cite>r</cite> layers on high side.</p></li>
<li><p><strong>r</strong> (<em>int</em>) – Pads orthogonal to <cite>axis</cite> on with <cite>l</cite> layers (pixels,lines,
planes,…) on low side an <cite>r</cite> layers on high side.</p></li>
<li><p><strong>fillpar</strong> (<em>scalar</em>) – Scalar fill parameter for <code class="docutils literal notranslate"><span class="pre">filltype=scalar</span></code> fill.</p></li>
<li><p><strong>filltype</strong> (<em>str</em>) – <ul>
<li><p><cite>‘scalar’</cite>, uniformly pad with fillpar</p></li>
<li><p><cite>’mirror’</cite>, mirror <cite>A</cite></p></li>
<li><p><cite>’periodic’</cite>, periodic fill</p></li>
<li><p><cite>’custom’</cite>, pad according arrays found in <cite>fillpar</cite></p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Padded array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.array_utils.crop_pad_axis" title="ptypy.utils.array_utils.crop_pad_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad_axis</span></code></a>, <a class="reference internal" href="#ptypy.utils.array_utils.crop_pad" title="ptypy.utils.array_utils.crop_pad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad</span></code></a>, <a class="reference internal" href="#ptypy.utils.array_utils.crop_pad_symmetric_2d" title="ptypy.utils.array_utils.crop_pad_symmetric_2d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_pad_symmetric_2d</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.rebin">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">rebin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.rebin" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebin ndarray data into a smaller ndarray of the same rank whose dimensions
are factors of the original dimensions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>eg. An array with 6 columns and 4 rows
can be reduced to have 6,3,2 or 1 columns and 4,2 or 1 rows.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>ndarray</em>) – Input array.</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>Default=-1</em><em>, </em><em>optional</em>) – The laplacian is computed along the provided axis or list of axes,
or all axes if None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Rebinned array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ptypy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="n">ptypy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">rebin</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">a.reshape(args[0],factor[0],args[1],factor[1],).sum(1).sum(2)*( 1./factor[0]/factor[1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b2</span><span class="o">=</span><span class="n">ptypy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">rebin</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">a.reshape(args[0],factor[0],).sum(1)*( 1./factor[0])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.rebin_2d">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">rebin_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rebin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.rebin_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebins array <cite>A</cite> symmetrically along the last 2 axes
with factor <cite>rebin</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – input array, must be at least two-dimensional.</p></li>
<li><p><strong>rebin</strong> (<em>int</em>) – rebin factor, <code class="docutils literal notranslate"><span class="pre">rebin=2</span></code> means that a square of 4 pixels will be
binned into one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – rebinned array. Note that data type casting follows numpy rules, so that boolean arrays are converted to int.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.array_utils.rebin" title="ptypy.utils.array_utils.rebin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rebin</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.rectangle">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">rectangle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ew</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.rectangle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.shift_zoom">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">shift_zoom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cen_old</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cen_new</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.shift_zoom" title="Permalink to this definition">¶</a></dt>
<dd><p>Move array from center <cite>cen_old</cite> to <cite>cen_new</cite> and perform a zoom <cite>zoom</cite>.</p>
<p>This function wraps <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.affine_transform.html">scipy.ndimage.affine_transform</a> and
uses the same keyword arguments.</p>
<p>Addiionally, it allows for complex input and out by complex overloading, see
<a class="reference internal" href="#ptypy.utils.misc.complex_overload" title="ptypy.utils.misc.complex_overload"><code class="xref any py py-func docutils literal notranslate"><span class="pre">complex_overload</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<em>numpy.ndarray</em>) – Array to shiftzoom. Can be float or complex</p></li>
<li><p><strong>zoom</strong> (<em>float</em>) – Zoom factor</p></li>
<li><p><strong>cen_old</strong> (<em>array_like</em>) – Center in input array <cite>c</cite></p></li>
<li><p><strong>cen_new</strong> (<em>array_like</em>) – Desired new center position in shiftzoomed array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Shifted and zoomed array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.switch_orientation">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">switch_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orientation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.switch_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches orientation of Array <cite>A</cite> along the last two axes <cite>(-2,-1)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>array-like</em>) – input array, must be at least twodimensional</p></li>
<li><p><strong>orientation</strong> (<em>tuple</em><em> or </em><em>int</em>) – <p>3-tuple of booleans (transpose,flipud,fliplr).
If integer, value is converted according to binary representation:</p>
<p>0: [False, False, False]
1: [False, False, True]
2: [False, True, False]
3: [False, True, True]
4: [True, False, False]
5: [True, False, True]
6: [True, True, False]
7: [True, True, True]</p>
</p></li>
<li><p><strong>center</strong> (<em>tuple</em><em>, </em><em>optional</em>) – move this coordinate alomg with the transformations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>out</strong> (<em>ndarray</em>) – A view of <cite>A</cite> where either rows, columns and axis may be reversed</p></li>
<li><p><strong>center</strong> (<em>tuple</em>) – new center</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.array_utils.zoom">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.array_utils.</span></span><span class="sig-name descname"><span class="pre">zoom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.array_utils.zoom" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated</em>, kept for backward compatibility only.</p>
<p>Wrapper <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.zoom.html">scipy.ndimage.zoom</a> function and shares
the same input arguments.</p>
<p>It performs a complex overlaod if the input is complex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<em>numpy.ndarray</em>) – Array to shiftzoom. Can be float or complex</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zoomed array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ptypy.utils.math_utils">
<span id="ptypy-utils-math-utils-module"></span><h2>ptypy.utils.math_utils module<a class="headerlink" href="#module-ptypy.utils.math_utils" title="Permalink to this headline">¶</a></h2>
<p>Numerical util functions.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.abs2">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">abs2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.abs2" title="Permalink to this definition">¶</a></dt>
<dd><p>Squared absolute value for an array <cite>A</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.c_gf">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">c_gf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'reflect'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.c_gf" title="Permalink to this definition">¶</a></dt>
<dd><p><em>complex input</em></p>
<p>Multidimensional Gaussian filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>array_like</em>) – The input array.</p></li>
<li><p><strong>sigma</strong> (<em>scalar</em><em> or </em><em>sequence of scalars</em>) – Standard deviation for Gaussian kernel. The standard
deviations of the Gaussian filter are given for each axis as a
sequence, or as a single number, in which case it is equal for
all axes.</p></li>
<li><p><strong>order</strong> (<em>int</em><em> or </em><em>sequence of ints</em><em>, </em><em>optional</em>) – The order of the filter along each axis is given as a sequence
of integers, or as a single number. An order of 0 corresponds
to convolution with a Gaussian kernel. A positive order
corresponds to convolution with that derivative of a Gaussian.</p></li>
<li><p><strong>output</strong> (<em>array</em><em> or </em><em>dtype</em><em>, </em><em>optional</em>) – The array in which to place the output, or the dtype of the
returned array. By default an array of the same dtype as input
will be created.</p></li>
<li><p><strong>mode</strong> (<em>str</em><em> or </em><em>sequence</em><em>, </em><em>optional</em>) – <p>The <cite>mode</cite> parameter determines how the input array is extended
when the filter overlaps a border. By passing a sequence of modes
with length equal to the number of dimensions of the input array,
different modes can be specified along each axis. Default value is
‘reflect’. The valid values and their behavior is as follows:</p>
<dl class="simple">
<dt>’reflect’ (<cite>d c b a | a b c d | d c b a</cite>)</dt><dd><p>The input is extended by reflecting about the edge of the last
pixel. This mode is also sometimes referred to as half-sample
symmetric.</p>
</dd>
<dt>’constant’ (<cite>k k k k | a b c d | k k k k</cite>)</dt><dd><p>The input is extended by filling all values beyond the edge with
the same constant value, defined by the <cite>cval</cite> parameter.</p>
</dd>
<dt>’nearest’ (<cite>a a a a | a b c d | d d d d</cite>)</dt><dd><p>The input is extended by replicating the last pixel.</p>
</dd>
<dt>’mirror’ (<cite>d c b | a b c d | c b a</cite>)</dt><dd><p>The input is extended by reflecting about the center of the last
pixel. This mode is also sometimes referred to as whole-sample
symmetric.</p>
</dd>
<dt>’wrap’ (<cite>a b c d | a b c d | a b c d</cite>)</dt><dd><p>The input is extended by wrapping around to the opposite edge.</p>
</dd>
</dl>
<p>For consistency with the interpolation functions, the following mode
names can also be used:</p>
<dl class="simple">
<dt>’grid-constant’</dt><dd><p>This is a synonym for ‘constant’.</p>
</dd>
<dt>’grid-mirror’</dt><dd><p>This is a synonym for ‘reflect’.</p>
</dd>
<dt>’grid-wrap’</dt><dd><p>This is a synonym for ‘wrap’.</p>
</dd>
</dl>
</p></li>
<li><p><strong>cval</strong> (<em>scalar</em><em>, </em><em>optional</em>) – Value to fill past edges of input if <cite>mode</cite> is ‘constant’. Default
is 0.0.</p></li>
<li><p><strong>truncate</strong> (<em>float</em>) – Truncate the filter at this many standard deviations.
Default is 4.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>gaussian_filter</strong> – Returned array of same shape as <cite>input</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The multidimensional filter is implemented as a sequence of
1-D convolution filters. The intermediate arrays are
stored in the same data type as the output. Therefore, for output
types with a limited precision, the results may be imprecise
because intermediate results may be stored with insufficient
precision.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.ndimage</span> <span class="kn">import</span> <span class="n">gaussian_filter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 0,  2,  4,  6,  8],</span>
<span class="go">       [10, 12, 14, 16, 18],</span>
<span class="go">       [20, 22, 24, 26, 28],</span>
<span class="go">       [30, 32, 34, 36, 38],</span>
<span class="go">       [40, 42, 44, 46, 48]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaussian_filter</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[ 4,  6,  8,  9, 11],</span>
<span class="go">       [10, 12, 14, 15, 17],</span>
<span class="go">       [20, 22, 24, 25, 27],</span>
<span class="go">       [29, 31, 33, 34, 36],</span>
<span class="go">       [35, 37, 39, 40, 42]])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">misc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">gray</span><span class="p">()</span>  <span class="c1"># show the filtered result in grayscale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>  <span class="c1"># left side</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>  <span class="c1"># right side</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ascent</span> <span class="o">=</span> <span class="n">misc</span><span class="o">.</span><span class="n">ascent</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">gaussian_filter</span><span class="p">(</span><span class="n">ascent</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ascent</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.cabs2">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">cabs2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.cabs2" title="Permalink to this definition">¶</a></dt>
<dd><p>Squared absolute value for an array <cite>A</cite>.
If <cite>A</cite> is complex, the returned value is complex as well, with the
imaginary part of zero.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.delxb">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">delxb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.delxb" title="Permalink to this definition">¶</a></dt>
<dd><p>Backward first order derivative for finite difference calculation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first element along the derivative direction is set to 0.</p>
<p>Pixel units are used (<span class="math notranslate nohighlight">\(\Delta x = \Delta h = 1\)</span>).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>ndarray</em>) – Input array.</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>Default=-1</em><em>, </em><em>optional</em>) – Which direction used for the derivative.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Derived array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.delxc">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">delxc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.delxc" title="Permalink to this definition">¶</a></dt>
<dd><p>Central first order derivative for finite difference calculation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Forward and backward derivatives are used for first and last
elements along the derivative direction.</p>
<p>Pixel units are used (<span class="math notranslate nohighlight">\(\Delta x = \Delta h = 1\)</span>).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>nd-numpy-array</em>) – Input array.</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>Default=-1</em><em>, </em><em>optional</em>) – Which direction used for the derivative.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Derived array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>nd-numpy-array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.delxf">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">delxf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.delxf" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward first order derivative for finite difference calculation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The last element along the derivative direction is set to 0.</p>
<p>Pixel units are used (<span class="math notranslate nohighlight">\(\Delta x = \Delta h = 1\)</span>).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>ndarray</em>) – Input array.</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>Default=-1</em><em>, </em><em>optional</em>) – Which direction used for the derivative.</p></li>
<li><p><strong>out</strong> (<em>ndarray</em><em>, </em><em>Default=None</em><em>, </em><em>optional</em>) – Array in wich the resault is written (same size as <code class="docutils literal notranslate"><span class="pre">a</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Derived array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.gauss_fwhm">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">gauss_fwhm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fwhm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">off</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.gauss_fwhm" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates gaussian with full width half maximum</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>ndarray</em>) – input array</p></li>
<li><p><strong>fwhm</strong> (<em>float</em><em>,</em><em>optional</em>) – Full width at half maximum</p></li>
<li><p><strong>off</strong> (<em>float</em><em>, </em><em>optional</em>) – Offset / shift</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.math_utils.gaussian" title="ptypy.utils.math_utils.gaussian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gaussian</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.gaussian">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">gaussian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">off</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates gaussian standard normal</p>
<div class="math notranslate nohighlight">
\[g(x)=\frac{1}{\mathrm{std}\sqrt{2\pi}}\,\exp
\left(-\frac{(x-\mathrm{off})^2}{2 \mathrm{std}^2 }\right)\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>ndarray</em>) – input array</p></li>
<li><p><strong>std</strong> (<em>float</em><em>,</em><em>optional</em>) – Standard deviation</p></li>
<li><p><strong>off</strong> (<em>float</em><em>, </em><em>optional</em>) – Offset / shift</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.math_utils.gauss_fwhm" title="ptypy.utils.math_utils.gauss_fwhm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gauss_fwhm</span></code></a>, <a class="reference internal" href="#ptypy.utils.math_utils.smooth_step" title="ptypy.utils.math_utils.smooth_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">smooth_step</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.gaussian2D">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">gaussian2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">off_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">off_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.gaussian2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates normalized 2D gaussian on array of dimension size.
Origin of coordinate system is in the center of the array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>int</em>) – length of requested array</p></li>
<li><p><strong>std_x</strong> (<em>float</em><em>,</em><em>optional</em>) – Standard deviation in x direction</p></li>
<li><p><strong>std_y</strong> (<em>float</em><em>,</em><em>optional</em>) – Standard deviation in y direction</p></li>
<li><p><strong>off_x</strong> (<em>float</em><em>, </em><em>optional</em>) – Offset / shift in x direction</p></li>
<li><p><strong>off_y</strong> (<em>float</em><em>, </em><em>optional</em>) – Offset / shift in y direction</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.gf">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">gf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.gf" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for scipy.ndimage.gaussian_filter, that determines whether
original or the complex function shall be used.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.math_utils.c_gf" title="ptypy.utils.math_utils.c_gf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">c_gf</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.gf_2d">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">gf_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.gf_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Gaussian filter along the last 2 axes</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.math_utils.gf" title="ptypy.utils.math_utils.gf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gf</span></code></a>, <a class="reference internal" href="#ptypy.utils.math_utils.c_gf" title="ptypy.utils.math_utils.c_gf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">c_gf</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.norm">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">norm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Norm.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.norm2">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">norm2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.norm2" title="Permalink to this definition">¶</a></dt>
<dd><p>Squared norm</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.ortho">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">ortho</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.ortho" title="Permalink to this definition">¶</a></dt>
<dd><p>Orthogonalize the given list of modes or ndarray along first axis.
<strong>specify procedure</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>modes</strong> (<em>array-like</em><em> or </em><em>list</em>) – List equally shaped arrays or array of higher dimension</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>amp</strong> (<em>vector</em>) – relative power of each mode</p></li>
<li><p><strong>nplist</strong> (<em>list</em>) – List of modes, sorted in descending order</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.rl_deconvolution">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">rl_deconvolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mtf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numiter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.rl_deconvolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Richardson Lucy deconvolution on a 2D numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>2darray</em>) – Diffraction data (measured intensity).</p></li>
<li><p><strong>mtf</strong> (<em>2darray</em>) – Modulation transfer function (Fourier transform of detector PSF).</p></li>
<li><p><strong>numiter</strong> (<em>int</em>) – Number of iterations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>out</strong> (<em>2darray</em>) – Approximated intensity after numiter iterations.</p></li>
<li><p><em>Note</em></p></li>
<li><p><em>Assumes that mtf is symmetric and that data is real and positive.</em></p></li>
<li><p><em>mtf is non fft shifted that means that the dc component is on mtf[0,0].</em></p></li>
<li><p><em>Todo</em></p></li>
<li><p><strong>non symmetric mtf</strong> (<em>mtf.conj()[-q] somewhere</em>)</p></li>
<li><p><strong>optimisation</strong> (<em>FFTW? scipy fft? error metric cancel iter?</em>)</p></li>
<li><p><em>Original code provided by M. Stockmar</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.math_utils.smooth_step">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.math_utils.</span></span><span class="sig-name descname"><span class="pre">smooth_step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mfs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.math_utils.smooth_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Smoothed step function with fwhm <cite>mfs</cite>
Evaluates the error function <cite>scipy.special.erf</cite>.</p>
</dd></dl>

</section>
<section id="module-ptypy.utils.misc">
<span id="ptypy-utils-misc-module"></span><h2>ptypy.utils.misc module<a class="headerlink" href="#module-ptypy.utils.misc" title="Permalink to this headline">¶</a></h2>
<p>Miscellaneous utility functions with little dependencies from other modules</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">Table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pods'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Basic table implemented using numpy.recarray
Ideally subclassed to be used with faster or more
flexible databases.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.add_records">
<span class="sig-name descname"><span class="pre">add_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.add_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Add records at the end of the table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.insert_records">
<span class="sig-name descname"><span class="pre">insert_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_ids</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.insert_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert records and overwrite existing content.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.modify_add">
<span class="sig-name descname"><span class="pre">modify_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record_ids</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.modify_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Take selected record ids and overwrite fields with values
<cite>**kwargs</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.new_fields">
<span class="sig-name descname"><span class="pre">new_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.new_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Add fields (columns) to the table. This is probably slow.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.new_table">
<span class="sig-name descname"><span class="pre">new_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.new_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.pull_records">
<span class="sig-name descname"><span class="pre">pull_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.pull_records" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.select_func">
<span class="sig-name descname"><span class="pre">select_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.select_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all records where search function <cite>func</cite> evaluates True.
Arguments to the function are selected by <cite>fields</cite>.
The search function will always receive the record_id as first argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.select_match">
<span class="sig-name descname"><span class="pre">select_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.select_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all records whose values are in the range [<cite>low</cite>,`high`] for
the field entry <cite>field</cite></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.misc.Table.select_range">
<span class="sig-name descname"><span class="pre">select_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.Table.select_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all records whose values are in the range [<cite>low</cite>,`high`] for
the field entry <cite>field</cite>. Should be a numerical value.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.all_subclasses">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">all_subclasses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.all_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for finding all subclasses of a base class.
If names is True, returns the names of the classes rather than
their object handles.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.clean_path">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">clean_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.clean_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes path absolute and create all sub directories if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – A filename.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.complex_overload">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">complex_overload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.complex_overload" title="Permalink to this definition">¶</a></dt>
<dd><p>Overloads function specified only for floats in the following manner</p>
<div class="math notranslate nohighlight">
\[\mathrm{complex\_overload}\{f\}(c) = f(\Re(c)) + \mathrm{i} f(\Im(c))\]</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.electron_wavelength">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">electron_wavelength</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">electron_energy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.electron_wavelength" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate electron wavelength based on energy in keV:</p>
<div class="math notranslate nohighlight">
\[\lambda = hc /  \sqrt{E * (2moc^2 + E)}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>electron_energy</strong> (<em>float</em>) – in units of keV</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>wavelength</strong> – in units of meter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.expect2">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">expect2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.expect2" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates 1d numpy array with 2 entries generated from multiple inputs
(tuples, arrays, scalars). Main puprose of this function is to circumvent
debugging of input as very often a 2-vector is requred in scripts</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">expect2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expect2</span><span class="p">(</span> <span class="mf">3.0</span> <span class="p">)</span>
<span class="go">array([ 3.,  3.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expect2</span><span class="p">(</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">)</span> <span class="p">)</span>
<span class="go">array([ 3.,  4.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expect2</span><span class="p">(</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">)</span> <span class="p">)</span>
<span class="go">array([ 1.,  3.])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.expect3">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">expect3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.expect3" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates 1d numpy array with 3 entries generated from multiple inputs
(tuples, arrays, scalars). Main puprose of this function is to circumvent
debugging of input.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">expect3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expect3</span><span class="p">(</span> <span class="mf">3.0</span> <span class="p">)</span>
<span class="go">array([ 3.,  3.,  3.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expect3</span><span class="p">(</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">)</span> <span class="p">)</span>
<span class="go">array([ 3.,  4.,  4.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expect3</span><span class="p">(</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">)</span> <span class="p">)</span>
<span class="go">array([ 1.,  3.,  4.])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.expectN">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">expectN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.expectN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.isstr">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">isstr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.isstr" title="Permalink to this definition">¶</a></dt>
<dd><p>This function should be used for checking if an object is of string type</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.keV2m">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">keV2m</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keV</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.keV2m" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert photon energy in keV to wavelength (in vacuum) in meters.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.keV2nm">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">keV2nm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keV</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.keV2nm" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert photon energy in keV to wavelength (in vacuum) in nanometers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.m2keV">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">m2keV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.m2keV" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert wavelength in meters to photon energy in keV.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.nm2keV">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">nm2keV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.nm2keV" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert wavelength in nanometers to photon energy in keV.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.str2int">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">str2int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.str2int" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms numpy array <cite>A</cite> of strings to <code class="docutils literal notranslate"><span class="pre">np.uint8</span></code> and back</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">str2int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;hallo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span>
<span class="go">array(&#39;hallo&#39;, dtype=&#39;|S5&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2int</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">array([104,  97, 108, 108, 111], dtype=uint8)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2int</span><span class="p">(</span><span class="n">str2int</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
<span class="go">array(&#39;hallo&#39;, dtype=&#39;|S5&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.str2range">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">str2range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.str2range" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an index list from string input <cite>s</cite></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Same as range(1,4,2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2range</span><span class="p">(</span><span class="s1">&#39;1:4:2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Same as range(1,2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2range</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.misc.unique_path">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.misc.</span></span><span class="sig-name descname"><span class="pre">unique_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.misc.unique_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes path absolute and unique</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – A filename.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ptypy.utils.parallel">
<span id="ptypy-utils-parallel-module"></span><h2>ptypy.utils.parallel module<a class="headerlink" href="#module-ptypy.utils.parallel" title="Permalink to this headline">¶</a></h2>
<p>Utility functions and classes to support MPI computing.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.parallel.LoadManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">LoadManager</span></span><a class="headerlink" href="#ptypy.utils.parallel.LoadManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Keeps track of the amount of data managed by each
process and helps keeping it balanced.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A LoadManager should always be given the full range of ids, as
the <cite>all-knowing</cite> power stems from the fact that it always knows
how many processes there are, what rank it has and the full range
of ids to distribute. Hence, please <em>“assign”</em> always the same list
across all nodes.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.parallel.LoadManager.assign">
<span class="sig-name descname"><span class="pre">assign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.LoadManager.assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Subdivide the provided list of ids into contiguous blocks to balance
the load among the processes.</p>
<p>The elements of idlist are used as keys to subsequently identify
the rank of a given id, through the dict self.rank_of. No check
is done whether ids passed are unique or even hashable (they
better are)</p>
<p>If idlist is None, increase by one the load of the least busy
process. <a class="reference internal" href="#ptypy.utils.parallel.LoadManager.rank_of" title="ptypy.utils.parallel.LoadManager.rank_of"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">rank_of</span></code></a> is not updated in this case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idlist</strong> (<em>list</em>) – List of objects that can also be keys in a <cite>dict</cite>, i.e. hashable
objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>R</strong> – A nested list, (a list of lists) such that <code class="docutils literal notranslate"><span class="pre">R[rank]=list</span></code>
of elements of <cite>idlist</cite> managed by process of given <cite>rank</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.parallel.LoadManager.load">
<span class="sig-name descname"><span class="pre">load</span></span><a class="headerlink" href="#ptypy.utils.parallel.LoadManager.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the number of elements assigned to this process.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.parallel.LoadManager.rank_of">
<span class="sig-name descname"><span class="pre">rank_of</span></span><a class="headerlink" href="#ptypy.utils.parallel.LoadManager.rank_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Rank of specific <em>id</em>, i.e. element of <em>idlist</em>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.parallel.LoadManager.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.LoadManager.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets <a class="reference internal" href="#ptypy.utils.parallel.LoadManager" title="ptypy.utils.parallel.LoadManager"><code class="xref any py py-class docutils literal notranslate"><span class="pre">LoadManager</span></code></a> to initial state.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.MPInoise2d">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">MPInoise2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rms_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mfs_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.MPInoise2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates complex-valued statistical noise in the shape of <cite>sh</cite>
consistent across all nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sh</strong> (<em>tuple</em>) – Output shape.</p></li>
<li><p><strong>rms</strong> (<em>float</em><em> or </em><em>None</em>) – Root mean square of noise in phase. If None, only ones are
returned.</p></li>
<li><p><strong>mfs</strong> (<em>float</em>) – Minimum feature size [in pixel] of noise in phase.</p></li>
<li><p><strong>rms_mod</strong> (<em>float</em><em> or </em><em>None</em>) – Root mean square of noise in amplitude / modulus.</p></li>
<li><p><strong>mfs_mod</strong> – Minimum feature size [in pixel] of noise in amplitude / modulus.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>noise</strong> – Numpy array filled with noise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.parallel.MPIrand_uniform" title="ptypy.utils.parallel.MPIrand_uniform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MPIrand_uniform</span></code></a>, <a class="reference internal" href="#ptypy.utils.parallel.MPIrand_normal" title="ptypy.utils.parallel.MPIrand_normal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MPIrand_normal</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.MPIrand_normal">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">MPIrand_normal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.MPIrand_normal" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Wrapper</strong> for <code class="docutils literal notranslate"><span class="pre">np.random.normal</span></code> for same random sample across all nodes.
<em>See numpy/scipy documentation below.</em></p>
<p>normal(loc=0.0, scale=1.0, size=None)</p>
<p>Draw random samples from a normal (Gaussian) distribution.</p>
<p>The probability density function of the normal distribution, first
derived by De Moivre and 200 years later by both Gauss and Laplace
independently <a class="footnote-reference brackets" href="#id6" id="id2">2</a>, is often called the bell curve because of
its characteristic shape (see the example below).</p>
<p>The normal distributions occurs often in nature.  For example, it
describes the commonly occurring distribution of samples influenced
by a large number of tiny, random disturbances, each with its own
unique distribution <a class="footnote-reference brackets" href="#id6" id="id3">2</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>New code should use the <code class="docutils literal notranslate"><span class="pre">normal</span></code> method of a <code class="docutils literal notranslate"><span class="pre">default_rng()</span></code>
instance instead; please see the <span class="xref std std-ref">random-quick-start</span>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc</strong> (<em>float</em><em> or </em><em>array_like of floats</em>) – Mean (“centre”) of the distribution.</p></li>
<li><p><strong>scale</strong> (<em>float</em><em> or </em><em>array_like of floats</em>) – Standard deviation (spread or “width”) of the distribution. Must be
non-negative.</p></li>
<li><p><strong>size</strong> (<em>int</em><em> or </em><em>tuple of ints</em><em>, </em><em>optional</em>) – Output shape.  If the given shape is, e.g., <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">n,</span> <span class="pre">k)</span></code>, then
<code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">*</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">k</span></code> samples are drawn.  If size is <code class="docutils literal notranslate"><span class="pre">None</span></code> (default),
a single value is returned if <code class="docutils literal notranslate"><span class="pre">loc</span></code> and <code class="docutils literal notranslate"><span class="pre">scale</span></code> are both scalars.
Otherwise, <code class="docutils literal notranslate"><span class="pre">np.broadcast(loc,</span> <span class="pre">scale).size</span></code> samples are drawn.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Drawn samples from the parameterized normal distribution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray or scalar</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.stats.norm</span></code></dt><dd><p>probability density function, distribution or cumulative density function, etc.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Generator.normal</span></code></dt><dd><p>which should be used for new code.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The probability density for the Gaussian distribution is</p>
<div class="math notranslate nohighlight">
\[p(x) = \frac{1}{\sqrt{ 2 \pi \sigma^2 }}
e^{ - \frac{ (x - \mu)^2 } {2 \sigma^2} },\]</div>
<p>where <span class="math notranslate nohighlight">\(\mu\)</span> is the mean and <span class="math notranslate nohighlight">\(\sigma\)</span> the standard
deviation. The square of the standard deviation, <span class="math notranslate nohighlight">\(\sigma^2\)</span>,
is called the variance.</p>
<p>The function has its peak at the mean, and its “spread” increases with
the standard deviation (the function reaches 0.607 times its maximum at
<span class="math notranslate nohighlight">\(x + \sigma\)</span> and <span class="math notranslate nohighlight">\(x - \sigma\)</span> <a class="footnote-reference brackets" href="#id6" id="id4">2</a>).  This implies that
normal is more likely to return samples lying close to the mean, rather
than those far away.</p>
<p class="rubric">References</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets">1</span></dt>
<dd><p>Wikipedia, “Normal distribution”,
<a class="reference external" href="https://en.wikipedia.org/wiki/Normal_distribution">https://en.wikipedia.org/wiki/Normal_distribution</a></p>
</dd>
<dt class="label" id="id6"><span class="brackets">2</span><span class="fn-backref">(<a href="#id2">1</a>,<a href="#id3">2</a>,<a href="#id4">3</a>)</span></dt>
<dd><p>P. R. Peebles Jr., “Central Limit Theorem” in “Probability,
Random Variables and Random Signal Principles”, 4th ed., 2001,
pp. 51, 51, 125.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Draw samples from the distribution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span> <span class="c1"># mean and standard deviation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>Verify the mean and the variance:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">mu</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="go">0.0  # may vary</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">sigma</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="go">0.1  # may vary</span>
</pre></div>
</div>
<p>Display the histogram of the samples, along with
the probability density function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">ignored</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">sigma</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span> <span class="o">-</span> <span class="p">(</span><span class="n">bins</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sigma</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="p">),</span>
<span class="gp">... </span>         <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Two-by-four array of samples from N(3, 6.25):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="go">array([[-4.49401501,  4.00950034, -1.81814867,  7.29718677],   # random</span>
<span class="go">       [ 0.39924804,  4.68456316,  4.99394529,  4.84057254]])  # random</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.MPIrand_uniform">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">MPIrand_uniform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">low</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.MPIrand_uniform" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Wrapper</strong> for <code class="docutils literal notranslate"><span class="pre">np.random.uniform</span></code> for same random sample across all nodes.
<em>See numpy/scipy documentation below.</em></p>
<p>uniform(low=0.0, high=1.0, size=None)</p>
<p>Draw samples from a uniform distribution.</p>
<p>Samples are uniformly distributed over the half-open interval
<code class="docutils literal notranslate"><span class="pre">[low,</span> <span class="pre">high)</span></code> (includes low, but excludes high).  In other words,
any value within the given interval is equally likely to be drawn
by <cite>uniform</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>New code should use the <code class="docutils literal notranslate"><span class="pre">uniform</span></code> method of a <code class="docutils literal notranslate"><span class="pre">default_rng()</span></code>
instance instead; please see the <span class="xref std std-ref">random-quick-start</span>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>low</strong> (<em>float</em><em> or </em><em>array_like of floats</em><em>, </em><em>optional</em>) – Lower boundary of the output interval.  All values generated will be
greater than or equal to low.  The default value is 0.</p></li>
<li><p><strong>high</strong> (<em>float</em><em> or </em><em>array_like of floats</em>) – Upper boundary of the output interval.  All values generated will be
less than or equal to high.  The high limit may be included in the
returned array of floats due to floating-point rounding in the
equation <code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">+</span> <span class="pre">(high-low)</span> <span class="pre">*</span> <span class="pre">random_sample()</span></code>.  The default value
is 1.0.</p></li>
<li><p><strong>size</strong> (<em>int</em><em> or </em><em>tuple of ints</em><em>, </em><em>optional</em>) – Output shape.  If the given shape is, e.g., <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">n,</span> <span class="pre">k)</span></code>, then
<code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">*</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">k</span></code> samples are drawn.  If size is <code class="docutils literal notranslate"><span class="pre">None</span></code> (default),
a single value is returned if <code class="docutils literal notranslate"><span class="pre">low</span></code> and <code class="docutils literal notranslate"><span class="pre">high</span></code> are both scalars.
Otherwise, <code class="docutils literal notranslate"><span class="pre">np.broadcast(low,</span> <span class="pre">high).size</span></code> samples are drawn.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Drawn samples from the parameterized uniform distribution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray or scalar</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">randint</span></code></dt><dd><p>Discrete uniform distribution, yielding integers.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_integers</span></code></dt><dd><p>Discrete uniform distribution over the closed interval <code class="docutils literal notranslate"><span class="pre">[low,</span> <span class="pre">high]</span></code>.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_sample</span></code></dt><dd><p>Floats uniformly distributed over <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1)</span></code>.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">random</span></code></dt><dd><p>Alias for <cite>random_sample</cite>.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">rand</span></code></dt><dd><p>Convenience function that accepts dimensions as input, e.g., <code class="docutils literal notranslate"><span class="pre">rand(2,2)</span></code> would generate a 2-by-2 array of floats, uniformly distributed over <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1)</span></code>.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Generator.uniform</span></code></dt><dd><p>which should be used for new code.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The probability density function of the uniform distribution is</p>
<div class="math notranslate nohighlight">
\[p(x) = \frac{1}{b - a}\]</div>
<p>anywhere within the interval <code class="docutils literal notranslate"><span class="pre">[a,</span> <span class="pre">b)</span></code>, and zero elsewhere.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">high</span></code> == <code class="docutils literal notranslate"><span class="pre">low</span></code>, values of <code class="docutils literal notranslate"><span class="pre">low</span></code> will be returned.
If <code class="docutils literal notranslate"><span class="pre">high</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">low</span></code>, the results are officially undefined
and may eventually raise an error, i.e. do not rely on this
function to behave when passed arguments satisfying that
inequality condition. The <code class="docutils literal notranslate"><span class="pre">high</span></code> limit may be included in the
returned array of floats due to floating-point rounding in the
equation <code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">+</span> <span class="pre">(high-low)</span> <span class="pre">*</span> <span class="pre">random_sample()</span></code>. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="mf">0.99999999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">5.0</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<p>Draw samples from the distribution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>All values are within the given interval:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Display the histogram of the samples, along with the
probability density function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">ignored</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.allreduce">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">allreduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.allreduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for comm.Allreduce, always in place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>numpy-ndarray</em>) – The array to operate on.</p></li>
<li><p><strong>op</strong> (<em>operation</em>) – MPI operation to execute. None or one of MPI.BAND, MPI.BOR,
MPI.BXOR, MPI.LAND, MPI.LOR, MPI.LXOR, MPI.MAX, MPI.MAXLOC,
MPI.MIN, MPI.MINLOC, MPI.OP_NULL, MPI.PROD, MPI.REPLACE or MPI.SUM.
If None, uses MPI.SUM.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Explanation</em> : If process #1 has ndarray <code class="docutils literal notranslate"><span class="pre">a</span></code> and process #2 has
ndarray <code class="docutils literal notranslate"><span class="pre">b</span></code>. After calling allreduce, the new arrays after allreduce
are <code class="docutils literal notranslate"><span class="pre">a'=op(a,b)</span></code> and <code class="docutils literal notranslate"><span class="pre">b'=op(a,b)</span></code> on process #1 and #2 respectively</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.barrier">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">barrier</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.barrier" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for comm.Barrier.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.bcast">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">bcast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.bcast" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <cite>comm.bcast</cite> and <cite>comm.Bcast</cite>.
If data is a <cite>numpy.ndarray</cite>, a header will be broadcasted first with
<cite>comm.bcast</cite> that contains information on array shape and data type.
Afterwards the array will be sent with <cite>comm.Bcast</cite>.
If data is not a <cite>numpy.ndarray</cite>, the whole object will be pickled
and broadcasted with <cite>comm.bcast</cite> in one go.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em><em> or </em><em>other</em>) – Object to send</p></li>
<li><p><strong>source</strong> (<em>int</em>) – The rank of the source node / process. Defaults to 0 (master).</p></li>
<li><p><strong>tag</strong> (<em>int</em>) – Defaults to 0.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.parallel.receive" title="ptypy.utils.parallel.receive"><code class="xref py py-obj docutils literal notranslate"><span class="pre">receive</span></code></a>, <a class="reference internal" href="#ptypy.utils.parallel.send" title="ptypy.utils.parallel.send"><code class="xref py py-obj docutils literal notranslate"><span class="pre">send</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.bcast_dict">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">bcast_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.bcast_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Broadcasts or scatters a dict <cite>dct</cite> from <code class="docutils literal notranslate"><span class="pre">rank==source</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em> or </em><em>'all'</em>) – List of keys whose values are accepted at each node. In case
of <code class="docutils literal notranslate"><span class="pre">keys=all</span></code>, every node accepts all items and <a class="reference internal" href="#ptypy.utils.parallel.bcast_dict" title="ptypy.utils.parallel.bcast_dict"><code class="xref any py py-func docutils literal notranslate"><span class="pre">bcast_dict</span></code></a>
acts as broadcast.</p></li>
<li><p><strong>source</strong> (<em>int</em>) – Rank of node / process which broadcasts / scatters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dct</strong> – A smaller dictionary with values to <cite>keys</cite> if that key
was in source dictionary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is no guarantee that each <em>key,value</em> pair is accepted at other
nodes, except for <code class="docutils literal notranslate"><span class="pre">keys='all'</span></code>. Also in this implementation
the input <cite>dct</cite> from source is <em>completely</em> transmitted to every node,
potentially creating a large overhead for may nodes and huge dictionarys</p>
<p>Deleting reference in input dictionary may result in data loss at
<code class="docutils literal notranslate"><span class="pre">rank==source</span></code></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.parallel.gather_dict" title="ptypy.utils.parallel.gather_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gather_dict</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.gather_dict">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">gather_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.gather_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Gathers broadcasted or scattered dict <cite>dct</cite> at rank <cite>target</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dct</strong> (<em>dict</em>) – Input dictionary. Remains unaltered</p></li>
<li><p><strong>target</strong> (<em>int</em>) – Rank of process where the <cite>dct</cite>’s are gathered</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Gathered dict at <code class="docutils literal notranslate"><span class="pre">rank==target</span></code>, Empty dict at <code class="docutils literal notranslate"><span class="pre">rank!=target</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the same <cite>key</cite> exists on different nodes, the corresponding values
will be consecutively overidden in the order of the ranks at the
gathering node without complain or notification.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.parallel.bcast_dict" title="ptypy.utils.parallel.bcast_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bcast_dict</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.gather_list">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">gather_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.gather_list" title="Permalink to this definition">¶</a></dt>
<dd><p>gathers list <cite>lst</cite> of all processes to a list of length <cite>length</cite>
according to order given by <cite>indices</cite>. definitely not foolproof
The user has to make sure that no index appears twice in all processes</p>
<p>return list of length <cite>length</cite>. has only meaning in master process</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.receive">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">receive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.receive" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <cite>comm.Recv</cite>. Probes first with <cite>comm.recv</cite>. If the
unpickled is a 3-tuple with first entry==’npy’, prepares buffer and
waits with <cite>comm.Recv</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>int</em><em> or </em><em>None</em>) – The rank of the node / process sending data. If None, this is set
to MPI.ANY_SOURCE</p></li>
<li><p><strong>tag</strong> (<em>int</em>) – Not really useful here - defaults to <cite>0</cite> all the time</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray or other</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parallel.send">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parallel.</span></span><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parallel.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <cite>comm.Send</cite> and <cite>comm.send</cite>.
If data is a <cite>numpy.ndarray</cite>, a header will be sent first with
<cite>comm.send</cite> that contains information on array shape and data type.
Afterwards the array will be sent with <cite>comm.Send</cite>.
If data is not a <cite>numpy.ndarray</cite>, the whole object will be pickled
and sent with <cite>comm.send</cite> in one go.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em><em> or </em><em>other</em>) – Object to send</p></li>
<li><p><strong>dest</strong> (<em>int</em>) – The rank of the destination node / process. Defaults to 0 (master).</p></li>
<li><p><strong>tag</strong> (<em>int</em>) – Defaults to 0.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.parallel.receive" title="ptypy.utils.parallel.receive"><code class="xref py py-obj docutils literal notranslate"><span class="pre">receive</span></code></a>, <a class="reference internal" href="#ptypy.utils.parallel.bcast" title="ptypy.utils.parallel.bcast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bcast</span></code></a></p>
</div>
</dd></dl>

</section>
<section id="module-ptypy.utils.parameters">
<span id="ptypy-utils-parameters-module"></span><h2>ptypy.utils.parameters module<a class="headerlink" href="#module-ptypy.utils.parameters" title="Permalink to this headline">¶</a></h2>
<p>Parameter definition.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.parameters.Param">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.parameters.</span></span><span class="sig-name descname"><span class="pre">Param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">__d__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.Param" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Convenience class: a dictionary that gives access to its keys
through attributes.</p>
<p>Note: dictionaries stored in this class are also automatically converted
to Param objects:
&gt;&gt;&gt; p = Param()
&gt;&gt;&gt; p.x = {}
&gt;&gt;&gt; p
Param({‘x’: {}})</p>
<p>While dict(p) returns a dictionary, it is not recursive, so it is better in this case
to use p.todict(). However, p.todict does not check for infinite recursion. So please
don’t store a dictionary (or a Param) inside itself.</p>
<p>BE: Please note also that the recursive behavior of the update function will create
new references. This will lead inconsistency if other objects refer to dicts or Params
in the updated Param instance.</p>
<p>A Dictionary that enables access to its keys as attributes.
Same constructor as dict.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.parameters.Param.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.Param.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p>Redefined to support dot keys.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.parameters.Param.__dir__">
<span class="sig-name descname"><span class="pre">__dir__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.Param.__dir__" title="Permalink to this definition">¶</a></dt>
<dd><p>Defined to include the keys when using dir(). Useful for
tab completion in e.g. ipython.
If you do not wish the dict key’s be displayed as attributes
(although they are still accessible as such) set the class
attribute <cite>_display_items_as_attributes</cite> to False. Default is
True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.parameters.Param.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.Param.copy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns Param</dt>
<dd class="field-odd"><p>A (recursive) copy of P with depth <cite>depth</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.parameters.Param.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">__d__</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Convert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.Param.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Param - almost same behavior as dict.update, except
that all dictionaries are converted to Param if <cite>Convert</cite> is set
to True, and update may occur in-place recursively for other Param
instances that self refers to.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Convert</strong> (<em>bool</em>) – If True, convert all dict-like values in self also to Param.
<em>WARNING</em>
This mey result in misdirected references in your environment</p></li>
<li><p><strong>in_place_depth</strong> (<em>int</em>) – Counter for recursive in-place updates
If the counter reaches zero, the Param to a key is
replaced instead of updated</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parameters.asParam">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parameters.</span></span><span class="sig-name descname"><span class="pre">asParam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.asParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the input to a Param.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>dict_like</em>) – Input structure, in any format that can be converted to a Param.</p></li>
<li><p><strong>Returns</strong> – </p></li>
<li><p><strong>out</strong> (<a class="reference internal" href="#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a>) – The Param structure built from a. No copy is done if the input
is already a Param.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parameters.param_from_json">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parameters.</span></span><span class="sig-name descname"><span class="pre">param_from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.param_from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert param tree from JSON file into Param().</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.parameters.param_from_yaml">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.parameters.</span></span><span class="sig-name descname"><span class="pre">param_from_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.parameters.param_from_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert param tree from YAML file into Param().</p>
</dd></dl>

</section>
<section id="module-ptypy.utils.plot_client">
<span id="ptypy-utils-plot-client-module"></span><h2>ptypy.utils.plot_client module<a class="headerlink" href="#module-ptypy.utils.plot_client" title="Permalink to this headline">¶</a></h2>
<p>Client tools for plotting.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_client.</span></span><span class="sig-name descname"><span class="pre">MPLClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoplot_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">home</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_thread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_slave</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.utils.plot_client.MPLplotter" title="ptypy.utils.plot_client.MPLplotter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.utils.plot_client.MPLplotter</span></code></a></p>
<p>Create a client and attempt to connect to a running reconstruction server.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLClient.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'dpi':</span> <span class="pre">100,</span> <span class="pre">'figsize':</span> <span class="pre">(16,</span> <span class="pre">10),</span> <span class="pre">'gridspecpars':</span> <span class="pre">(0.1,</span> <span class="pre">0.12,</span> <span class="pre">0.07,</span> <span class="pre">0.95,</span> <span class="pre">0.05,</span> <span class="pre">0.93),</span> <span class="pre">'home':</span> <span class="pre">'/tmp/ptypy/',</span> <span class="pre">'interactive':</span> <span class="pre">True,</span> <span class="pre">'movie':</span> <span class="pre">False,</span> <span class="pre">'ob':</span> <span class="pre">{'auto_display':</span> <span class="pre">['a',</span> <span class="pre">'p'],</span> <span class="pre">'clims':</span> <span class="pre">[None,</span> <span class="pre">[-3.141592653589793,</span> <span class="pre">3.141592653589793]],</span> <span class="pre">'cmaps':</span> <span class="pre">['gray',</span> <span class="pre">'hsv'],</span> <span class="pre">'crop':</span> <span class="pre">[0.3,</span> <span class="pre">0.3],</span> <span class="pre">'layers':</span> <span class="pre">None,</span> <span class="pre">'local_error':</span> <span class="pre">False,</span> <span class="pre">'mask':</span> <span class="pre">0.3,</span> <span class="pre">'rm_pr':</span> <span class="pre">True,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'use_colorbar':</span> <span class="pre">True},</span> <span class="pre">'plot_error':</span> <span class="pre">[True,</span> <span class="pre">True,</span> <span class="pre">True],</span> <span class="pre">'pr':</span> <span class="pre">{'auto_display':</span> <span class="pre">['c'],</span> <span class="pre">'clims':</span> <span class="pre">[None,</span> <span class="pre">[-3.141592653589793,</span> <span class="pre">3.141592653589793]],</span> <span class="pre">'cmaps':</span> <span class="pre">['gray',</span> <span class="pre">'hsv'],</span> <span class="pre">'crop':</span> <span class="pre">[0.3,</span> <span class="pre">0.3],</span> <span class="pre">'layers':</span> <span class="pre">None,</span> <span class="pre">'local_error':</span> <span class="pre">False,</span> <span class="pre">'mask':</span> <span class="pre">0.3,</span> <span class="pre">'rm_pr':</span> <span class="pre">True,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'use_colorbar':</span> <span class="pre">True},</span> <span class="pre">'simplified_aspect_ratios':</span> <span class="pre">False}</span></em><a class="headerlink" href="#ptypy.utils.plot_client.MPLClient.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLClient.loop_plot">
<span class="sig-name descname"><span class="pre">loop_plot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLClient.loop_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot forever.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_client.</span></span><span class="sig-name descname"><span class="pre">MPLplotter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runtime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_thread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Plotting Client for Ptypy, using matplotlib.</p>
<p>Create a client and attempt to connect to a running reconstruction server.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'dpi':</span> <span class="pre">100,</span> <span class="pre">'figsize':</span> <span class="pre">(16,</span> <span class="pre">10),</span> <span class="pre">'gridspecpars':</span> <span class="pre">(0.1,</span> <span class="pre">0.12,</span> <span class="pre">0.07,</span> <span class="pre">0.95,</span> <span class="pre">0.05,</span> <span class="pre">0.93),</span> <span class="pre">'home':</span> <span class="pre">'/tmp/ptypy/',</span> <span class="pre">'interactive':</span> <span class="pre">True,</span> <span class="pre">'movie':</span> <span class="pre">False,</span> <span class="pre">'ob':</span> <span class="pre">{'auto_display':</span> <span class="pre">['a',</span> <span class="pre">'p'],</span> <span class="pre">'clims':</span> <span class="pre">[None,</span> <span class="pre">[-3.141592653589793,</span> <span class="pre">3.141592653589793]],</span> <span class="pre">'cmaps':</span> <span class="pre">['gray',</span> <span class="pre">'hsv'],</span> <span class="pre">'crop':</span> <span class="pre">[0.3,</span> <span class="pre">0.3],</span> <span class="pre">'layers':</span> <span class="pre">None,</span> <span class="pre">'local_error':</span> <span class="pre">False,</span> <span class="pre">'mask':</span> <span class="pre">0.3,</span> <span class="pre">'rm_pr':</span> <span class="pre">True,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'use_colorbar':</span> <span class="pre">True},</span> <span class="pre">'plot_error':</span> <span class="pre">[True,</span> <span class="pre">True,</span> <span class="pre">True],</span> <span class="pre">'pr':</span> <span class="pre">{'auto_display':</span> <span class="pre">['c'],</span> <span class="pre">'clims':</span> <span class="pre">[None,</span> <span class="pre">[-3.141592653589793,</span> <span class="pre">3.141592653589793]],</span> <span class="pre">'cmaps':</span> <span class="pre">['gray',</span> <span class="pre">'hsv'],</span> <span class="pre">'crop':</span> <span class="pre">[0.3,</span> <span class="pre">0.3],</span> <span class="pre">'layers':</span> <span class="pre">None,</span> <span class="pre">'local_error':</span> <span class="pre">False,</span> <span class="pre">'mask':</span> <span class="pre">0.3,</span> <span class="pre">'rm_pr':</span> <span class="pre">True,</span> <span class="pre">'shape':</span> <span class="pre">None,</span> <span class="pre">'use_colorbar':</span> <span class="pre">True},</span> <span class="pre">'simplified_aspect_ratios':</span> <span class="pre">False}</span></em><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.create_plot_from_tile_list">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_plot_from_tile_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fignum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_shape_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[(4,</span> <span class="pre">(2,</span> <span class="pre">2))]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.create_plot_from_tile_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.draw">
<span class="sig-name descname"><span class="pre">draw</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.draw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.plot_all">
<span class="sig-name descname"><span class="pre">plot_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.plot_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.plot_error">
<span class="sig-name descname"><span class="pre">plot_error</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.plot_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.plot_storage">
<span class="sig-name descname"><span class="pre">plot_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'obj'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.plot_storage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.MPLplotter.update_plot_layout">
<span class="sig-name descname"><span class="pre">update_plot_layout</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.MPLplotter.update_plot_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the plot layout.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_client.</span></span><span class="sig-name descname"><span class="pre">PlotClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_thread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A client that connects and continually gets the data required for plotting.
Note: all data is transferred as soon as the server provides it. This might
be a waste of bandwidth if all that is required is a client that plots “on demand”…</p>
<p>This PlotClient doesn’t actually plot.</p>
<p>Create a client and attempt to connect to a running reconstruction server.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.ACTIVE">
<span class="sig-name descname"><span class="pre">ACTIVE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.ACTIVE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.DATA">
<span class="sig-name descname"><span class="pre">DATA</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.DATA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.STOPPED">
<span class="sig-name descname"><span class="pre">STOPPED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.STOPPED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect from reconstruction server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.get_data">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread-safe way to copy data buffer.
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.start" title="Permalink to this definition">¶</a></dt>
<dd><p>This needs to be run for the thread to initialize.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.status">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.status" title="Permalink to this definition">¶</a></dt>
<dd><p>True only if new data were acquired since last time checked.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.PlotClient.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.PlotClient.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop loop plot</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.figure_from_ptycho">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_client.</span></span><span class="sig-name descname"><span class="pre">figure_from_ptycho</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.figure_from_ptycho" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matplotlib figure displaying a reconstruction
from a Ptycho instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> (<a class="reference internal" href="ptypy.core.html#ptypy.core.ptycho.Ptycho" title="ptypy.core.ptycho.Ptycho"><em>Ptycho</em></a>) – Ptycho instance</p></li>
<li><p><strong>pars</strong> (<em>Plotting paramters</em><em>, </em><em>optional</em>) – plotting template as u.Param() istance</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fig</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.figure.Figure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.figure_from_ptyr">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_client.</span></span><span class="sig-name descname"><span class="pre">figure_from_ptyr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.figure_from_ptyr" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matplotlib figure displaying a reconstruction
from a .ptyr file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – path to .ptyr file</p></li>
<li><p><strong>pars</strong> (<em>Plotting paramters</em><em>, </em><em>optional</em>) – plotting template as u.Param() istance</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fig</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.figure.Figure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_client.spawn_MPLClient">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_client.</span></span><span class="sig-name descname"><span class="pre">spawn_MPLClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoplot_pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">home</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_client.spawn_MPLClient" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that creates and runs a silent instance of MPLClient.</p>
</dd></dl>

</section>
<section id="module-ptypy.utils.plot_utils">
<span id="ptypy-utils-plot-utils-module"></span><h2>ptypy.utils.plot_utils module<a class="headerlink" href="#module-ptypy.utils.plot_utils" title="Permalink to this headline">¶</a></h2>
<p>Plotting utilities.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">PtyAxis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Plot environment for matplotlib to allow for a Image plot with color axis,
potentially of a potentially complex array.</p>
<p>Please note that this class may undergo changes or become obsolete altogether.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>pyplot.axis</em>) – An axis in matplotlib figure. If <code class="docutils literal notranslate"><span class="pre">None</span></code> a figure with a single
axis will be created.</p></li>
<li><p><strong>data</strong> (<em>numpy.ndarray</em>) – The (complex) twodimensional data to be displayed.</p></li>
<li><p><strong>channel</strong> (<em>str</em>) – <p>Choose</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span></code> to plot absolute/modulus value of the data,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'p'</span></code> to plot phase value of the data,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span></code> to plot real value of the data,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span></code> to plot imaginary value of the data,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'a'</span></code> to plot a composite image where phase channel maps to hue and
modulus channel maps to brightness of the color.</p></li>
</ul>
</p></li>
<li><p><strong>cmap</strong> (<em>str</em>) – String representation of one of matplotlibs colormaps.</p></li>
<li><p><strong>fontsize</strong> (<em>int</em>) – Base font size of labels, etc.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>vmax</strong> (<em>vmin</em><em>,</em>) – Minimum and maximum value for colormap scaling</p></li>
<li><p><strong>rmramp</strong> (<em>bool</em>) – Remove phase ramp if <code class="docutils literal notranslate"><span class="pre">True</span></code>, default is <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.add_colorbar">
<span class="sig-name descname"><span class="pre">add_colorbar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aspect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.02</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">256</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.add_colorbar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.set_channel">
<span class="sig-name descname"><span class="pre">set_channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.set_channel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.set_clims">
<span class="sig-name descname"><span class="pre">set_clims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.set_clims" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.set_cmap">
<span class="sig-name descname"><span class="pre">set_cmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.set_cmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.set_data">
<span class="sig-name descname"><span class="pre">set_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.set_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.set_mask">
<span class="sig-name descname"><span class="pre">set_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.set_mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.PtyAxis.set_psize">
<span class="sig-name descname"><span class="pre">set_psize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.PtyAxis.set_psize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.complex2hsv">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">complex2hsv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.complex2hsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms a complex array into an RGB image,
mapping phase to hue, amplitude to value and
keeping maximum saturation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cin</strong> (<em>ndarray</em>) – Complex input. Must be two-dimensional.</p></li>
<li><p><strong>vmin</strong> (<em>float</em>) – Clip amplitude of input into this interval.</p></li>
<li><p><strong>vmax</strong> (<em>float</em>) – Clip amplitude of input into this interval.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rgb</strong> – Three dimensional output.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.plot_utils.complex2rgb" title="ptypy.utils.plot_utils.complex2rgb"><code class="xref py py-obj docutils literal notranslate"><span class="pre">complex2rgb</span></code></a>, <a class="reference internal" href="#ptypy.utils.plot_utils.hsv2rgb" title="ptypy.utils.plot_utils.hsv2rgb"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hsv2rgb</span></code></a>, <a class="reference internal" href="#ptypy.utils.plot_utils.hsv2complex" title="ptypy.utils.plot_utils.hsv2complex"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hsv2complex</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.complex2rgb">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">complex2rgb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cin</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.complex2rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes <cite>complex2hsv</cite> and then <cite>hsv2rgb</cite></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.plot_utils.complex2hsv" title="ptypy.utils.plot_utils.complex2hsv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">complex2hsv</span></code></a>, <a class="reference internal" href="#ptypy.utils.plot_utils.hsv2rgb" title="ptypy.utils.plot_utils.hsv2rgb"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hsv2rgb</span></code></a>, <a class="reference internal" href="#ptypy.utils.plot_utils.rgb2complex" title="ptypy.utils.plot_utils.rgb2complex"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rgb2complex</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.franzmap">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">franzmap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.franzmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the default colormap to Franz’s map and apply to current image if any.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.hsv2complex">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">hsv2complex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.hsv2complex" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse to <a class="reference internal" href="#ptypy.utils.plot_utils.complex2hsv" title="ptypy.utils.plot_utils.complex2hsv"><code class="xref any py py-func docutils literal notranslate"><span class="pre">complex2hsv</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.hsv2rgb">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">hsv2rgb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hsv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.hsv2rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>HSV (Hue,Saturation,Value) to RGB (Red,Green,Blue) transformation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hsv</strong> (<em>array-like</em>) – Input must be two-dimensional. <strong>First</strong> axis is interpreted
as hue,saturation,value channels.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rgb</strong> – Three dimensional output. <strong>Last</strong> axis is interpreted as
red, green, blue channels.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.plot_utils.complex2rgb" title="ptypy.utils.plot_utils.complex2rgb"><code class="xref py py-obj docutils literal notranslate"><span class="pre">complex2rgb</span></code></a>, <a class="reference internal" href="#ptypy.utils.plot_utils.complex2hsv" title="ptypy.utils.plot_utils.complex2hsv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">complex2hsv</span></code></a>, <a class="reference internal" href="#ptypy.utils.plot_utils.rgb2hsv" title="ptypy.utils.plot_utils.rgb2hsv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rgb2hsv</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.imload">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">imload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.imload" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an image and returns a numpy array. <em>May get deleted</em></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.imsave">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">imsave</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.imsave" title="Permalink to this definition">¶</a></dt>
<dd><p>Take array <cite>a</cite> and transform to <cite>PIL.Image</cite> object that may be used
by <cite>pyplot.imshow</cite> for example. Also save image buffer directly
without the sometimes unnecessary Gui-frame and overhead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>ndarray</em>) – Two dimensional array. Can be complex, in which case the amplitude
will be optionally clipped by <cite>vmin</cite> and <cite>vmax</cite> if set.</p></li>
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>optionsl</em>) – File path to save the image buffer to. Use ‘*.png’ or ‘*.png’
as image formats.</p></li>
<li><p><strong>vmin</strong> (<em>float</em><em>, </em><em>optional</em>) – Value limits (‘clipping’) to fit the color scale.
If not set, color scale will span from minimum to maximum value
in array</p></li>
<li><p><strong>vmax</strong> (<em>float</em><em>, </em><em>optional</em>) – Value limits (‘clipping’) to fit the color scale.
If not set, color scale will span from minimum to maximum value
in array</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the colormap for colorencoding.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>im</strong> – a <cite>PIL.Image</cite> object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>PIL.Image</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.plot_utils.complex2rgb" title="ptypy.utils.plot_utils.complex2rgb"><code class="xref py py-obj docutils literal notranslate"><span class="pre">complex2rgb</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils</span> <span class="kn">import</span> <span class="n">imsave</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.resources</span> <span class="kn">import</span> <span class="n">flower_obj</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">flower_obj</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pil</span> <span class="o">=</span> <span class="n">imsave</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">pil</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>converts array a into, and returns a PIL image and displays it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pil</span> <span class="o">=</span> <span class="n">imsave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">moon</span><span class="o">.</span><span class="n">png</span><span class="p">)</span>
</pre></div>
</div>
<p>returns the image and also saves it to filename</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imsave</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>clips the array to values between 0 and 0.5.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imsave</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>uses a matplotlib colormap with name ‘gray’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.pause">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">pause</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the GUI event loop for <em>interval</em> seconds.</p>
<p>If there is an active figure, it will be updated and displayed before the
pause, and the GUI event loop (if any) will run during the pause.</p>
<p>This can be used for crude animation.  For more complex animation use
<code class="xref py py-mod docutils literal notranslate"><span class="pre">matplotlib.animation</span></code>.</p>
<p>If there is no active figure, sleep for <em>interval</em> seconds instead.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.animation</span></code></dt><dd><p>Proper animations</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">show</span></code></dt><dd><p>Show all figures and optional block until all figures are closed.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.plot_storage">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">plot_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fignum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modulus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(slice(None,</span> <span class="pre">1,</span> <span class="pre">None),</span> <span class="pre">slice(None,</span> <span class="pre">None,</span> <span class="pre">None),</span> <span class="pre">slice(None,</span> <span class="pre">None,</span> <span class="pre">None))</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">si_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'x'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.plot_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Quickly display the data buffer of a <a class="reference internal" href="ptypy.core.html#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> instance.</p>
<p>Keyword arguments are the same as <a class="reference internal" href="#ptypy.utils.plot_utils.PtyAxis" title="ptypy.utils.plot_utils.PtyAxis"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PtyAxis</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> (<a class="reference internal" href="ptypy.core.html#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><em>Storage</em></a>) – Storage instance</p></li>
<li><p><strong>fignum</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of the figure.</p></li>
<li><p><strong>slices</strong> (<em>tuple of slices</em><em> or </em><em>string of numpy index expression</em><em>, </em><em>optional</em>) – Determines what part of Storage buffer is displayed, i.e. which
layers and which region-of-interest. Layers are subplotted
horizontically next to each other. Figsize is (6,6*layers)</p></li>
<li><p><strong>modulus</strong> (<em>str</em><em>, </em><em>optional</em>) – One of <cite>sqrt</cite>, <cite>log</cite> or <cite>linear</cite> to apply to modulus of array
buffer. Useful to reduce dynamic range for diffraction images.</p></li>
<li><p><strong>si_axes</strong> (<em>str</em><em>, </em><em>optional</em>) – One of ‘x’,’xy’,’y’ or None, determins which axes display
length units instead of pixel units</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em><em>, </em><em>scalar</em><em> or </em><em>None</em>) – Bool array of valid pixel data for rescaling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fig</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>maplotlib.pyplot.figure</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.plot_utils.imsave" title="ptypy.utils.plot_utils.imsave"><code class="xref py py-obj docutils literal notranslate"><span class="pre">imsave</span></code></a>, <a class="reference internal" href="ptypy.core.html#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.rgb2complex">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">rgb2complex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rgb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.rgb2complex" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse to <a class="reference internal" href="#ptypy.utils.plot_utils.complex2rgb" title="ptypy.utils.plot_utils.complex2rgb"><code class="xref any py py-func docutils literal notranslate"><span class="pre">complex2rgb</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.rgb2hsv">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">rgb2hsv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rgb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.rgb2hsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse to <a class="reference internal" href="#ptypy.utils.plot_utils.hsv2rgb" title="ptypy.utils.plot_utils.hsv2rgb"><code class="xref any py py-func docutils literal notranslate"><span class="pre">hsv2rgb</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.plot_utils.rmphaseramp">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">rmphaseramp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_phaseramp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.plot_utils.rmphaseramp" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to remove the phase ramp in a two-dimensional complex array
<code class="docutils literal notranslate"><span class="pre">a</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>ndarray</em>) – Input image as complex 2D-array.</p></li>
<li><p><strong>weight</strong> (<em>ndarray</em><em>, </em><em>str</em><em>, </em><em>optional</em>) – Pass weighting array or use <code class="docutils literal notranslate"><span class="pre">'abs'</span></code> for a modulus-weighted
phaseramp and <code class="docutils literal notranslate"><span class="pre">Non</span></code> for no weights.</p></li>
<li><p><strong>return_phaseramp</strong> (<em>bool</em><em>, </em><em>optional</em>) – Use True to get also the phaseramp array <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>out</strong> (<em>ndarray</em>) – Modified 2D-array, <code class="docutils literal notranslate"><span class="pre">out=a*p</span></code></p></li>
<li><p><strong>p</strong> (<em>ndarray, optional</em>) – Phaseramp if <code class="docutils literal notranslate"><span class="pre">return_phaseramp</span> <span class="pre">=</span> <span class="pre">True</span></code>, otherwise omitted</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">rmphaseramp</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">rmphaseramp</span><span class="p">(</span><span class="n">image</span> <span class="p">,</span> <span class="n">return_phaseramp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ptypy.utils.scripts">
<span id="ptypy-utils-scripts-module"></span><h2>ptypy.utils.scripts module<a class="headerlink" href="#module-ptypy.utils.scripts" title="Permalink to this headline">¶</a></h2>
<p>Longer script-like functions.</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.cxro_iref">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">cxro_iref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.cxro_iref" title="Permalink to this definition">¶</a></dt>
<dd><p>Query CXRO database for index of refraction values for a solid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>formula</strong> (<em>str</em>) – String representation of the Formula to use.</p></li>
<li><p><strong>energy</strong> (<em>float</em><em> or </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em>) – Either a single energy (in eV) or the minimum/maximum bounds.</p></li>
<li><p><strong>density</strong> (<em>None</em><em> or </em><em>float</em><em>, </em><em>optional</em>) – Density of the material [g/ccm]. If <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;0</span></code> the
regular density at ambient temperatures is used.</p></li>
<li><p><strong>npts</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of points between the min and max energies.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>energy, delta, beta</strong> – Energy used and the respective <cite>delta</cite> and <cite>beta</cite> values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>scalar or vector</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.diversify">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">diversify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.diversify" title="Permalink to this definition">¶</a></dt>
<dd><p>Add diversity to 3d numpy array <cite>A</cite>, <em>acts in-place</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – Input numpy array.</p></li>
<li><p><strong>noise</strong> (<em>2-tuple</em><em> or </em><em>4-tuple</em>) – For detailed description see <a class="reference internal" href="#ptypy.utils.parallel.MPInoise2d" title="ptypy.utils.parallel.MPInoise2d"><code class="xref any py py-func docutils literal notranslate"><span class="pre">ptypy.utils.parallel.MPInoise2d</span></code></a></p></li>
<li><p><strong>power</strong> (<em>float</em><em>, </em><em>tuple</em>) – Relative power of layers with respect to the first (0) layer.
Can be scalar or tuple / array</p></li>
<li><p><strong>shift</strong> (<em>float</em><em>, </em><em>tuple</em>) – Relative shift of layers with respect to the first (0) layer.
Can be scalar or tuple / array
<strong>not implemented yet</strong></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.parallel.MPInoise2d" title="ptypy.utils.parallel.MPInoise2d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ptypy.utils.parallel.MPInoise2d</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.hdr_image">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">hdr_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exp_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[3000,</span> <span class="pre">50000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'highest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ClipLongestExposure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ClipShortestExposure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.hdr_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a high dynamic range image from a list of images <cite>img_list</cite>
and corresponding exposure information in <cite>exp_list</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_list</strong> (<em>list</em>) – Sequence of images (as 2d np.ndarray)</p></li>
<li><p><strong>exp_list</strong> (<em>list of float</em>) – Associated exposures to each element of above sequence <cite>img_list</cite></p></li>
<li><p><strong>thresholds</strong> (<em>list</em><em>, </em><em>2-tuple</em>) – Tuple of lower limit (noise floor) and upper limit (overexposure)
in the images.</p></li>
<li><p><strong>dark_list</strong> (<em>list</em>) – Single frame or sequence of dark images (as 2d np.array) of the
same length as <cite>img_list</cite>. These frames are used for dark-field
correction</p></li>
<li><p><strong>avg_type</strong> (<em>str</em>) – <p>Type of combining all valid pixels:</p>
<blockquote>
<div><ul>
<li><p><cite>’highest’</cite>, the next longest exposure is used to replace
overexposed pixels.</p></li>
<li><p><cite>&lt;other_string&gt;</cite>, overexposed pixels are replaced by the
pixel average of all other images with valid pixel values
for that pixel.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>mask_list</strong> (<em>list</em>) – Single frame or sequence of 2d np.array.
Provide additional masking (dead pixels, hot pixels)</p></li>
<li><p><strong>ClipLongestExposure</strong> (<em>bool</em>) – If True, also mask the noise floor in the longest exposure.</p></li>
<li><p><strong>ClipShortestExposure</strong> (<em>bool</em>) – if True, also mask the overexposed pixels in the shortest exposure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Combined hdr-image with shape of one of the frame in <cite>img_list</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy</span> <span class="kn">import</span> <span class="n">io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dark_list</span><span class="p">,</span> <span class="n">meta</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="s1">&#39;/path/to/dark/images/ccd*.raw&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img_list</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="s1">&#39;/path/to/images/ccd*.raw&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">meta</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="s1">&#39;exposure_time__key&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">meta</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hdr</span><span class="p">,</span> <span class="n">masks</span> <span class="o">=</span> <span class="n">hdr_image</span><span class="p">(</span><span class="n">img_list</span><span class="p">,</span> <span class="n">exp_list</span><span class="p">,</span> <span class="n">dark_list</span><span class="o">=</span><span class="n">dark_list</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.load_from_ptyr">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">load_from_ptyr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'probe'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ID</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.load_from_ptyr" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience script to extract data from <code class="docutils literal notranslate"><span class="pre">*.ptyr</span></code>-file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Full Path to a <code class="docutils literal notranslate"><span class="pre">*.ptyr</span></code> data file. No check on the file suffix
is done. Any compatible hdf5 formatted file is allowed.</p></li>
<li><p><strong>what</strong> (<em>str</em>) – Type of container to retrieve. Only <cite>‘probe’</cite> and <cite>‘obj’</cite> makes
sense. Default is <cite>‘probe’</cite></p></li>
<li><p><strong>ID</strong> (<em>str</em>) – ID of storage in chosen container. If <code class="docutils literal notranslate"><span class="pre">None</span></code> the first stored
storage is chosen.</p></li>
<li><p><strong>layer</strong> (<em>int</em><em>, </em><em>optional</em>) – If an integer, the data buffer of chosen storage gets sliced
with <cite>layer</cite> for its first index.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – If <cite>layer</cite> is provided, that layer <code class="docutils literal notranslate"><span class="pre">storage,data[layer]</span></code>
will be sliced from the 3d data buffer, else the whole buffer
<code class="docutils literal notranslate"><span class="pre">storage.data</span></code> will be returned.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.mass_center">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">mass_center</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.mass_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates mass center of n-dimensional array <cite>A</cite>
along tuple of axis <cite>axes</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>ndarray</em>) – input array</p></li>
<li><p><strong>axes</strong> (<em>list</em><em>, </em><em>tuple</em>) – Sequence of axes that contribute to distributed mass. If
<code class="docutils literal notranslate"><span class="pre">axes==None</span></code>, all axes are considered.</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em><em>, </em><em>None</em>) – If not None, an array the same shape as A acting as mask</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mass</strong> – Center of mass in pixel for each <cite>axis</cite> selected.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>1d array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.phase_from_dpc">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">phase_from_dpc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dpc_row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpc_col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.phase_from_dpc" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements fourier integration method for two differential quantities.</p>
<p>Assumes 2 arrays of N-dimensions which contain differential quantities
in X and Y, i.e. the LAST two dimensions (-2 &amp; -1) in this case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dpc_row</strong> (<em>ndarray</em>) – Differential information along 2nd last dimension
and last dimension respectively. Must be of the same shape.</p></li>
<li><p><strong>dpc_col</strong> (<em>ndarray</em>) – Differential information along 2nd last dimension
and last dimension respectively. Must be of the same shape.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Integrated array of same shape as <cite>dpc_row</cite> and <cite>dpc_col</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.png2mpg">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">png2mpg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">listoffiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">framefile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'frames.txt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bitrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">codec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'wmv2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Encode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RemoveImages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.png2mpg" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a movie (*.mpg) from a collection of *.png or *.jpeg frames.
<em>Requires</em> binary of <strong>mencoder</strong> installed on system</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>listoffiles</strong> (<em>list of str</em>) – A list of paths to files. Each file will be reinterpreted as a
collection files in the same directory, e.g. only the first file
in a series needs to be selected. All series for which a first
file was given will be concatenated in the movie. May also be
a textfile with a listing of frames in which case the creation
of an intermediate file of frame paths will be skipped.</p></li>
<li><p><strong>framefile</strong> (<em>str</em>) – Filepath, the respective file will be created to store a list
of all frames. This file will be used by mencoder later.</p></li>
<li><p><strong>fps</strong> (<em>scalar</em>) – Frames per second in final movie</p></li>
<li><p><strong>bitrate</strong> (<em>int</em>) – Encoding detail, determines video quality</p></li>
<li><p><strong>codec</strong> (<em>str</em>) – Defines the codec to Use</p></li>
<li><p><strong>Encode</strong> (<em>bool</em>) – If True, video will be encoded calling mencoder
If False, mencoder will not be called, but the necessary command
expression will be returned instead. Very well suited for a dry-run</p></li>
<li><p><strong>RemoveImages</strong> (<em>bool</em>) – If True, all images referred to by framefile are deleted except
for the last frame.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cmd</strong> – Command string for the shell to encode the video later manually.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils.scripts</span> <span class="kn">import</span> <span class="n">png2mpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">png2mpg</span><span class="p">([</span><span class="s1">&#39;/path/to/image_000.png&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The following happens:
1) search for files similar to image_*.png in ‘/path/to/’
2) found files get listed in a file ‘/path/to/frames.txt’
3) calls mencoder to use that file to encode a movie with the default args.
4) movie is in the same folder as ‘frames.txt’ and is called ‘frames.mpg’</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">png2mpg</span><span class="p">([</span><span class="s1">&#39;/path1/to/imageA_040.png&#39;</span><span class="p">,</span> <span class="s1">&#39;/path2/to/imageB_001.png&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">framefile</span><span class="o">=</span><span class="s1">&#39;./banana.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Generates list file ‘banana_text’ in current folder. The list file
contains in order every path compatible with the wildcards
‘/path1/to/imageA_*.png’ and ‘/path2/to/imageB_*.png’</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span> <span class="o">=</span> <span class="n">png2mpg</span><span class="p">([</span><span class="s1">&#39;/path/to/image_000.png&#39;</span><span class="p">],</span> <span class="n">Encode</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns encoder argument string. Use os.system(encoderstring) for
encoding manually later</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.radial_distribution">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">radial_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radii</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.radial_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns radial mass distribution up to radii in <cite>radii</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>ndarray</em>) – input array</p></li>
<li><p><strong>radii</strong> (<em>list</em><em>, </em><em>tuple</em>) – Sequence of radii to calculate enclosed mass. If <cite>None</cite>,
the sequence defaults to <code class="docutils literal notranslate"><span class="pre">range(1,</span> <span class="pre">np.min(A.shape)</span> <span class="pre">/</span> <span class="pre">2)</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>radii, masses</strong> – Sequence of used <cite>radii</cite> and corresponding integrated mass
<cite>masses</cite>. Sequences have the same length.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.remove_hot_pixels">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">remove_hot_pixels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_edges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.remove_hot_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces outlier data points with the median of the surrounding data points.</p>
<p>Removes outlier data points of a 2D numpy array and replaces them with the
median of the surrounding data points. Original code (see at the end of
function) had been published by DanHickstein on stackoverflow.com under
CC BY-SA license.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>2d np.array</em>) – Input 2D numpy array to be corrected.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – Size of the window on which the median filter will be applied around
every data point.</p></li>
<li><p><strong>tolerance</strong> (<em>int</em>) – Tolerance multiplied with the standard deviation of the data array
subtracted by the blurred array (difference array) yields the threshold
for cutoff.</p></li>
<li><p><strong>ignore_edges</strong> (<em>bool</em>) – If True, edges of the array are ignored, which speeds up the code.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – Returns a 2d np.array where outlier data points have been replaced with
the median of the surrounding data points and a list containing the
coordinates of the outlier data points.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2d array, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.stxm_analysis">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">stxm_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.stxm_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a stxm analysis on a storage using the pods.</p>
<p>This function is MPI compatible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> (<em>ptypy.core.Storage instance</em>) – A <a class="reference internal" href="ptypy.core.html#ptypy.core.classes.Storage" title="ptypy.core.classes.Storage"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> instance to be analysed</p></li>
<li><p><strong>probe</strong> (<em>None</em><em>, </em><em>scalar</em><em> or </em><em>array</em>) – <ul>
<li><p>If None, picks a probe from the first view’s pod</p></li>
<li><p>If scalar, uses a Gaussian with probe as standard deviation</p></li>
<li><p>Else: attempts to use passed value directly as 2d-probe</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>trans</strong> (<em>ndarray</em>) – Transmission of shape <code class="docutils literal notranslate"><span class="pre">storage.shape</span></code>.</p></li>
<li><p><strong>dpc_row</strong> (<em>ndarray</em>) – Differential phase contrast along row-coordinates, i.e. vertical
direction (y-direction) of shape <code class="docutils literal notranslate"><span class="pre">storage.shape</span></code>.</p></li>
<li><p><strong>dpc_col</strong> (<em>ndarray</em>) – Differential phase contrast along column-coordinates, i.e.
horizontal direction (x-direction) of shape <code class="docutils literal notranslate"><span class="pre">storage.shape</span></code>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.stxm_init">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">stxm_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.stxm_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience script that performs a STXM analysis for storage
<cite>storage</cite> given a probe array <cite>probe</cite> and stores result back
in storage.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#ptypy.utils.scripts.stxm_analysis" title="ptypy.utils.scripts.stxm_analysis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stxm_analysis</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.scripts.xradia_star">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.scripts.</span></span><span class="sig-name descname"><span class="pre">xradia_star</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spokes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minfeature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ringfact</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.scripts.xradia_star" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an Xradia-like star pattern on an array of shape <cite>sh</cite>.</p>
<p>Works superb as test pattern in ptychography.</p>
<p><em>requires scipy</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sh</strong> (<em>int</em><em>, </em><em>tuple</em>) – Shape of requested array.</p></li>
<li><p><strong>std</strong> (<em>float</em>) – <dl class="simple">
<dt>“Resolution” of xradia star, i.e. standard deviation of the</dt><dd><p>error function used for smoothing the edges (in pixel).</p>
</dd>
</dl>
</p></li>
<li><p><strong>spokes</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of spokes.</p></li>
<li><p><strong>minfeature</strong> (<em>float</em><em>, </em><em>optional</em>) – Spoke width at the smallest (inner) tip (in pixel).</p></li>
<li><p><strong>ringfact</strong> (<em>float</em>) – Increase in feature size from ring to ring (factor). Determines
position of the rings.</p></li>
<li><p><strong>rings</strong> (<em>int</em>) – Number of rings with spokes.</p></li>
<li><p><strong>contrast</strong> (<em>float</em>) – Minimum contrast, set to zero for a gradual increase of the profile
from zero to 1, set to 1 for no gradient in profile.</p></li>
<li><p><strong>Fast</strong> (<em>bool</em>) – If set to False, the error function is evaluated at the edges.
Preferred choice when using fft, as edges are less prone to
antialiasing in this case. If set to True, simple boolean
comparison will be used instead to draw the edges and the
result is later smoothed with a gaussian filter. Preferred choice
for impatient users, as this choice is roughly a factor 2 faster
for larger arrays</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils.scripts</span> <span class="kn">import</span> <span class="n">xradia_star</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Base configuration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">xradia_star</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Few spokes single ring</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">xradia_star</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">std</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">rings</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">minfeature</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">ringfact</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Very fine plus gradient</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X3</span> <span class="o">=</span> <span class="n">xradia_star</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="n">std</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">rings</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">minfeature</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="n">contrast</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">131</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">X1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">132</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">X2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">133</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">X3</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ptypy.utils.descriptor">
<span id="ptypy-utils-descriptor-module"></span><h2>ptypy.utils.descriptor module<a class="headerlink" href="#module-ptypy.utils.descriptor" title="Permalink to this headline">¶</a></h2>
<p>Parameter validation. This module parses the file
<code class="docutils literal notranslate"><span class="pre">resources/parameters_descriptions.csv</span></code> to extract the parameter
defaults for PtyPy. It saves all parameters in the form of
a <code class="xref py py-class docutils literal notranslate"><span class="pre">PDesc</span></code> object, which are flat listed in
<cite>parameter_descriptions</cite> or in <cite>entry_points_dct</cite>, which only contains
parameters with subparameters (children).</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.descriptor.</span></span><span class="sig-name descname"><span class="pre">ArgParseDescriptor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.utils.descriptor.Descriptor" title="ptypy.utils.descriptor.Descriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.utils.descriptor.Descriptor</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the parameter represented by this instance</p></li>
<li><p><strong>parent</strong> (<a class="reference internal" href="#ptypy.utils.descriptor.Descriptor" title="ptypy.utils.descriptor.Descriptor"><em>Descriptor</em></a><em> or </em><em>None</em>) – Parent parameter or None if no parent parameter.</p></li>
<li><p><strong>separator</strong> (<em>str</em>) – Subtree separator character. Defaults to ‘.’.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor.OPTIONS_DEF">
<span class="sig-name descname"><span class="pre">OPTIONS_DEF</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'choices':</span> <span class="pre">'If</span> <span class="pre">parameter</span> <span class="pre">is</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">choices,</span> <span class="pre">these</span> <span class="pre">are</span> <span class="pre">listed</span> <span class="pre">here.',</span> <span class="pre">'default':</span> <span class="pre">'Default</span> <span class="pre">value</span> <span class="pre">for</span> <span class="pre">parameter.',</span> <span class="pre">'help':</span> <span class="pre">'A</span> <span class="pre">small</span> <span class="pre">docstring</span> <span class="pre">for</span> <span class="pre">command</span> <span class="pre">line</span> <span class="pre">parsing</span> <span class="pre">(required).'}</span></em><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor.OPTIONS_DEF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor.add2argparser">
<span class="sig-name descname"><span class="pre">add2argparser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excludes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('scans',</span> <span class="pre">'engines')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'add'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor.add2argparser" title="Permalink to this definition">¶</a></dt>
<dd><p>Add parameter to an argparse.ArgumentParser instance (or create and return one if parser is None)
prefix is</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor.choices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">choices</span></span><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor.choices" title="Permalink to this definition">¶</a></dt>
<dd><p>If parameter is a list of choices, these are listed here.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor.default">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default</span></span><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns default as a Python type</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>A more verbose wrapper around <cite>ast.literal_eval</cite></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.ArgParseDescriptor.help">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">help</span></span><a class="headerlink" href="#ptypy.utils.descriptor.ArgParseDescriptor.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Short descriptive explanation of parameter</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.descriptor.</span></span><span class="sig-name descname"><span class="pre">Descriptor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for parameter descriptions and validation. This class is used to
hold both command line arguments and Param-type parameter descriptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><strong>OPTIONS_DEF</strong> – A dictionary whose keys are attribute names and values are description
of the attribute. It this description contains the text “required” or
“mandatory”, the attribute is registered as required.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the parameter represented by this instance</p></li>
<li><p><strong>parent</strong> (<a class="reference internal" href="#ptypy.utils.descriptor.Descriptor" title="ptypy.utils.descriptor.Descriptor"><em>Descriptor</em></a><em> or </em><em>None</em>) – Parent parameter or None if no parent parameter.</p></li>
<li><p><strong>separator</strong> (<em>str</em>) – Subtree separator character. Defaults to ‘.’.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.OPTIONS_DEF">
<span class="sig-name descname"><span class="pre">OPTIONS_DEF</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.OPTIONS_DEF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a descendant</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">desc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a descendant</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-print the Parameter options in ConfigParser format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.add_child">
<span class="sig-name descname"><span class="pre">add_child</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">desc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.add_child" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.children">
<span class="sig-name descname"><span class="pre">children</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.children" title="Permalink to this definition">¶</a></dt>
<dd><p>Hierarchical tree of sub-Parameters.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.descendants">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">descendants</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over all descendants as a pair (path name, object).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.from_string">
<span class="sig-name descname"><span class="pre">from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Load Parameter from string using Python’s ConfigParser</p>
<p>Each parameter occupies its own section.
Separator characters in sections names map to a tree-hierarchy.</p>
<p>Keyword arguments are forwarded to <cite>ConfigParser.RawConfigParser</cite></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.get" title="Permalink to this definition">¶</a></dt>
<dd><p>return self.root[path] if it exists, None otherwise.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.is_child">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_child</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.is_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Type check</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.load_conf_parser">
<span class="sig-name descname"><span class="pre">load_conf_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fbuffer</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.load_conf_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Load Parameter defaults using Python’s ConfigParser</p>
<p>Each parameter occupies its own section.
Separator characters in sections names map to a tree-hierarchy.</p>
<p>Keyword arguments are forwarded to <cite>ConfigParser.RawConfigParser</cite></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.load_csv">
<span class="sig-name descname"><span class="pre">load_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fbuffer</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.load_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Load from csv as a fielded array. Keyword arguments are passed
on to csv.DictReader</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.load_json">
<span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fbuffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.load_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of parameter</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.new_child">
<span class="sig-name descname"><span class="pre">new_child</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">implicit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.new_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new descendant and pass new options.</p>
<p>If name contains separators, intermediate children are created.</p>
<p>If name already exists, update options and return existing child.</p>
<p>If name already exists and had been created implicitly to create
a child further down, the order in self.children is corrected to
honor the order of explicitly created children.
This behaviour can be deactivated by setting implicit=True.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.option_keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">option_keys</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.option_keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.options">
<span class="sig-name descname"><span class="pre">options</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Attributes to the parameters.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>Parent parameter (<a class="reference internal" href="#ptypy.utils.descriptor.Descriptor" title="ptypy.utils.descriptor.Descriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Descriptor</span></code></a> type) if it has one.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return complete path from root of parameter tree.
(self.root[self.path] == self should always be True unless self.root is root)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.prune_child">
<span class="sig-name descname"><span class="pre">prune_child</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.prune_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove and return the parameter “name” and all its children.
:param name: The descendant name
:return: The Parameter object.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.root">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">root</span></span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.root" title="Permalink to this definition">¶</a></dt>
<dd><p>Return root of parameter tree.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.save_conf_parser">
<span class="sig-name descname"><span class="pre">save_conf_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_optional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.save_conf_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Save Parameter defaults using Pythons ConfigParser</p>
<p>Each parameter occupies its own section.
Separator characters in sections names map to a tree-hierarchy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.save_csv">
<span class="sig-name descname"><span class="pre">save_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fbuffer</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.save_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Save to fbuffer. Keyword arguments are passed
on to csv.DictWriter</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.save_json">
<span class="sig-name descname"><span class="pre">save_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fbuffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.save_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.Descriptor.to_string">
<span class="sig-name descname"><span class="pre">to_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.Descriptor.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the full content of descriptor as a string in configparser format.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ptypy.utils.descriptor.</span></span><span class="sig-name descname"><span class="pre">EvalDescriptor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptypy.utils.descriptor.ArgParseDescriptor" title="ptypy.utils.descriptor.ArgParseDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ptypy.utils.descriptor.ArgParseDescriptor</span></code></a></p>
<p>Parameter class to store metadata for all ptypy parameters (default, limits, documentation, etc.)</p>
<p>Parameter class to store metadata for all ptypy parameters (default, limits, documentation, etc.)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.OPTIONS_DEF">
<span class="sig-name descname"><span class="pre">OPTIONS_DEF</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'choices':</span> <span class="pre">'If</span> <span class="pre">parameter</span> <span class="pre">is</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">choices,</span> <span class="pre">these</span> <span class="pre">are</span> <span class="pre">listed</span> <span class="pre">here.',</span> <span class="pre">'default':</span> <span class="pre">'Default</span> <span class="pre">value</span> <span class="pre">for</span> <span class="pre">parameter</span> <span class="pre">(required).',</span> <span class="pre">'doc':</span> <span class="pre">'A</span> <span class="pre">longer</span> <span class="pre">explanation</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">online</span> <span class="pre">docs.',</span> <span class="pre">'help':</span> <span class="pre">'A</span> <span class="pre">small</span> <span class="pre">docstring</span> <span class="pre">for</span> <span class="pre">command</span> <span class="pre">line</span> <span class="pre">parsing</span> <span class="pre">(required).',</span> <span class="pre">'lowlim':</span> <span class="pre">'Lower</span> <span class="pre">limit</span> <span class="pre">for</span> <span class="pre">scalar</span> <span class="pre">/</span> <span class="pre">integer</span> <span class="pre">values',</span> <span class="pre">'type':</span> <span class="pre">'Comma</span> <span class="pre">separated</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">acceptable</span> <span class="pre">types.',</span> <span class="pre">'uplim':</span> <span class="pre">'Upper</span> <span class="pre">limit</span> <span class="pre">for</span> <span class="pre">scalar</span> <span class="pre">/</span> <span class="pre">integer</span> <span class="pre">values',</span> <span class="pre">'userlevel':</span> <span class="pre">'User</span> <span class="pre">level,</span> <span class="pre">a</span> <span class="pre">higher</span> <span class="pre">level</span> <span class="pre">means</span> <span class="pre">a</span> <span class="pre">parameter</span> <span class="pre">that</span> <span class="pre">is</span> <span class="pre">\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">less</span> <span class="pre">likely</span> <span class="pre">to</span> <span class="pre">vary</span> <span class="pre">or</span> <span class="pre">harder</span> <span class="pre">to</span> <span class="pre">understand.'}</span></em><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.OPTIONS_DEF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that input parameter pars is consistent with parameter description, up to given depth.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pars</strong> (<em>The input parameter</em><em> or </em><em>parameter tree</em>) – </p></li>
<li><p><strong>depth</strong> (<em>The level at wich verification is done.</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>A dictionary report using CODES values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.create_template">
<span class="sig-name descname"><span class="pre">create_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_at_root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.create_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates templates for ptypy scripts from an EvalDescriptor instance.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.default">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Default value as a Python type</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.doc">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">doc</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Long documentation, may contain <em>sphinx</em> inline markup.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.is_evaluable">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_evaluable</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.is_evaluable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.is_symlink">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_symlink</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.is_symlink" title="Permalink to this definition">¶</a></dt>
<dd><p>True if type/default are symlinks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.is_target">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_target</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.is_target" title="Permalink to this definition">¶</a></dt>
<dd><p>True if parent of symlink targets.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.limits">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">limits</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.limits" title="Permalink to this definition">¶</a></dt>
<dd><p>(lower, upper) limits if applicable. (None, None) otherwise</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.make_default">
<span class="sig-name descname"><span class="pre">make_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.make_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a default parameter structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>depth</strong> (<em>int</em>) – The depth in the structure to which all sub nodes are expanded
All nodes beyond depth will be ignored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pars</strong> – A parameter branch as Param.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param">Param</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptypy.utils.descriptor</span> <span class="kn">import</span> <span class="n">defaults_tree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">defaults_tree</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">make_default</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.make_doc_rst">
<span class="sig-name descname"><span class="pre">make_doc_rst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.make_doc_rst" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-print in RST format the whole structure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.parse_doc">
<span class="sig-name descname"><span class="pre">parse_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.parse_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to parse docstring and automatically attach new parameters.
The parameter section is identified by a line starting with the word “Parameters”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The descendant name under which all parameters will be held. If None, use self.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Whether or not to traverse the docstring of base classes. <em>Is there are use case for this?</em></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>The decorator function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.sanity_check">
<span class="sig-name descname"><span class="pre">sanity_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.sanity_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if default parameters from configuration are
self-constistent with limits and choices.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.type" title="Permalink to this definition">¶</a></dt>
<dd><p>List of possible data types.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.userlevel">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">userlevel</span></span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.userlevel" title="Permalink to this definition">¶</a></dt>
<dd><p>User level, a higher level means a parameter that is less
likely to vary or harder to understand.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ptypy.utils.descriptor.EvalDescriptor.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raisecodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">4)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.descriptor.EvalDescriptor.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the parameter structure <cite>pars</cite> matches the documented
constraints for this node / parameter.</p>
<p>The function raises a RuntimeError if one of the code in the list
<cite>raisecodes</cite> has been found. If raisecode is empty, the function will
always return successfully but problems will be logged using logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pars</strong> (<a class="reference internal" href="#ptypy.utils.parameters.Param" title="ptypy.utils.parameters.Param"><em>Param</em></a><em>, </em><em>dict</em>) – A parameter set to validate</p></li>
<li><p><strong>raisecodes</strong> (<em>list</em>) – List of codes that will raise a RuntimeError.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-ptypy.utils.verbose">
<span id="ptypy-utils-verbose-module"></span><h2>ptypy.utils.verbose module<a class="headerlink" href="#module-ptypy.utils.verbose" title="Permalink to this headline">¶</a></h2>
<p>Verbose package, based on the standard logging library.</p>
<p>Use as:
from verbose import logger
logger.warning(‘This is a warning’)
logger.info(‘This is an information’)
…</p>
<p>TODO:
- Handlers for file and for interaction server
- option for logging.disable to reduce call overhead</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.verbose.log">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.verbose.</span></span><span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.verbose.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.verbose.report">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.verbose.</span></span><span class="sig-name descname"><span class="pre">report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thing</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noheader</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.verbose.report" title="Permalink to this definition">¶</a></dt>
<dd><p>no protection for circular references</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ptypy.utils.verbose.set_level">
<span class="sig-prename descclassname"><span class="pre">ptypy.utils.verbose.</span></span><span class="sig-name descname"><span class="pre">set_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ptypy.utils.verbose.set_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Set verbosity level. Kept here for backward compatibility</p>
</dd></dl>

</section>
<section id="module-ptypy.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ptypy.utils" title="Permalink to this headline">¶</a></h2>
<p>Util sub-package</p>
<p>This file is part of the PTYPY package.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>Copyright 2014 by the PTYPY team, see AUTHORS.</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>see LICENSE for details.</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../content.html">
              <img class="logo" src="../_static/logo_100px.png" alt="Logo"/>
            </a></p>
<h3><a href="../content.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started with Ptypy</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">Concepts and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_management.html">Data management</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameter tree structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ptypy.html">ptypy package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ptypy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ptypy.core.html">ptypy.core package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.engines.html">ptypy.engines package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.experiment.html">ptypy.experiment package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.io.html">ptypy.io package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.resources.html">ptypy.resources package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.simulations.html">ptypy.simulations package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ptypy.utils package</a></li>
<li class="toctree-l3"><a class="reference internal" href="ptypy.debug.html">ptypy.debug package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ptypy.html#module-ptypy">Module contents</a></li>
</ul>
</li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="ptypy.simulations.html"
                          title="previous chapter">ptypy.simulations package</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ptypy.debug.html"
                          title="next chapter">ptypy.debug package</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/rst/ptypy.utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptypy.debug.html" title="ptypy.debug package"
             >next</a> |</li>
        <li class="right" >
          <a href="ptypy.simulations.html" title="ptypy.simulations package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../content.html">ptypy 0.8.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ptypy.html" >ptypy package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ptypy.utils package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Pierre Thibault, Bjoern Enders and others.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>